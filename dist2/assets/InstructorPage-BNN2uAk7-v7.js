import{r as t,p as ie,j as e,s as B,b as ge,n as xe,m as te,d as he,e as me,i as ue,k as ye}from"./index-CdUgHszu-v7.js";import{n as fe,c as Q,a as be}from"./User.es-ByxEiKSl-v7.js";import{a as ne,n as ve,b as je}from"./Share.es-CrG1KySg-v7.js";import{g as Se,i as we,r as Ae}from"./holidays-BTzqNUnu-v7.js";import{I as Ie}from"./InstallGuideModal-DzhpClxo-v7.js";const ke=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M225.29,165.93C216.61,151,212,129.57,212,104a84,84,0,0,0-168,0c0,25.58-4.59,47-13.27,61.93A20.08,20.08,0,0,0,30.66,186,19.77,19.77,0,0,0,48,196H84.18a44,44,0,0,0,87.64,0H208a19.77,19.77,0,0,0,17.31-10A20.08,20.08,0,0,0,225.29,165.93ZM128,212a20,20,0,0,1-19.6-16h39.2A20,20,0,0,1,128,212ZM54.66,172C63.51,154,68,131.14,68,104a60,60,0,0,1,120,0c0,27.13,4.48,50,13.33,68Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M208,192H48a8,8,0,0,1-6.88-12C47.71,168.6,56,139.81,56,104a72,72,0,0,1,144,0c0,35.82,8.3,64.6,14.9,76A8,8,0,0,1,208,192Z",opacity:"0.2"}),t.createElement("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M220.07,176.94C214.41,167.2,206,139.73,206,104a78,78,0,1,0-156,0c0,35.74-8.42,63.2-14.08,72.94A14,14,0,0,0,48,198H90.48a38,38,0,0,0,75,0H208a14,14,0,0,0,12.06-21.06ZM128,218a26,26,0,0,1-25.29-20h50.58A26,26,0,0,1,128,218Zm81.71-33a1.9,1.9,0,0,1-1.7,1H48a1.9,1.9,0,0,1-1.7-1,2,2,0,0,1,0-2C53.87,170,62,139.69,62,104a66,66,0,1,1,132,0c0,35.68,8.14,65.95,15.71,79A2,2,0,0,1,209.71,185Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M218.35,178C212.58,168,204,140.13,204,104a76,76,0,1,0-152,0c0,36.13-8.59,64-14.36,73.95A12,12,0,0,0,48,196H92.23a36,36,0,0,0,71.54,0H208A12,12,0,0,0,218.35,178ZM128,220a28,28,0,0,1-27.71-24h55.42A28,28,0,0,1,128,220Zm83.45-34a3.91,3.91,0,0,1-3.44,2H48a3.91,3.91,0,0,1-3.44-2,4,4,0,0,1,0-4C52,169.17,60,139.32,60,104a68,68,0,1,1,136,0c0,35.31,8,65.17,15.44,78A4,4,0,0,1,211.45,186Z"}))]]),Ce=new Map([["bold",t.createElement(t.Fragment,null,t.createElement("path",{d:"M224,154.8l-47.09-21.11-.18-.08a19.94,19.94,0,0,0-19,1.75,13.08,13.08,0,0,0-1.12.84l-22.31,19c-13-7.05-26.43-20.37-33.49-33.21l19.06-22.66a11.76,11.76,0,0,0,.85-1.15,20,20,0,0,0,1.66-18.83,1.42,1.42,0,0,1-.08-.18L101.2,32A20.06,20.06,0,0,0,80.42,20.15,60.27,60.27,0,0,0,28,80c0,81.61,66.39,148,148,148a60.27,60.27,0,0,0,59.85-52.42A20.06,20.06,0,0,0,224,154.8ZM176,204A124.15,124.15,0,0,1,52,80,36.29,36.29,0,0,1,80.48,44.46l18.82,42L80.14,109.28a12,12,0,0,0-.86,1.16A20,20,0,0,0,78,130.08c9.42,19.28,28.83,38.56,48.31,48A20,20,0,0,0,146,176.63a11.63,11.63,0,0,0,1.11-.85l22.43-19.07,42,18.81A36.29,36.29,0,0,1,176,204Z"}))],["duotone",t.createElement(t.Fragment,null,t.createElement("path",{d:"M223.94,174.08A48.33,48.33,0,0,1,176,216,136,136,0,0,1,40,80,48.33,48.33,0,0,1,81.92,32.06a8,8,0,0,1,8.3,4.8l21.13,47.2a8,8,0,0,1-.66,7.53L89.32,117a7.93,7.93,0,0,0-.54,7.81c8.27,16.93,25.77,34.22,42.75,42.41a7.92,7.92,0,0,0,7.83-.59l25-21.3a8,8,0,0,1,7.59-.69l47.16,21.13A8,8,0,0,1,223.94,174.08Z",opacity:"0.2"}),t.createElement("path",{d:"M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0s.08,0,.11,0A40.21,40.21,0,0,1,176,208Z"}))],["fill",t.createElement(t.Fragment,null,t.createElement("path",{d:"M231.88,175.08A56.26,56.26,0,0,1,176,224C96.6,224,32,159.4,32,80A56.26,56.26,0,0,1,80.92,24.12a16,16,0,0,1,16.62,9.52l21.12,47.15,0,.12A16,16,0,0,1,117.39,96c-.18.27-.37.52-.57.77L96,121.45c7.49,15.22,23.41,31,38.83,38.51l24.34-20.71a8.12,8.12,0,0,1,.75-.56,16,16,0,0,1,15.17-1.4l.13.06,47.11,21.11A16,16,0,0,1,231.88,175.08Z"}))],["light",t.createElement(t.Fragment,null,t.createElement("path",{d:"M221.59,160.3l-47.24-21.17a14,14,0,0,0-13.28,1.22,4.81,4.81,0,0,0-.56.42l-24.69,21a1.88,1.88,0,0,1-1.68.06c-15.87-7.66-32.31-24-40-39.65a1.91,1.91,0,0,1,0-1.68l21.07-25a6.13,6.13,0,0,0,.42-.58,14,14,0,0,0,1.12-13.27L95.73,34.49a14,14,0,0,0-14.56-8.38A54.24,54.24,0,0,0,34,80c0,78.3,63.7,142,142,142a54.25,54.25,0,0,0,53.89-47.17A14,14,0,0,0,221.59,160.3ZM176,210C104.32,210,46,151.68,46,80A42.23,42.23,0,0,1,82.67,38h.23a2,2,0,0,1,1.84,1.31l21.1,47.11a2,2,0,0,1,0,1.67L84.73,113.15a4.73,4.73,0,0,0-.43.57,14,14,0,0,0-.91,13.73c8.87,18.16,27.17,36.32,45.53,45.19a14,14,0,0,0,13.77-1c.19-.13.38-.27.56-.42l24.68-21a1.92,1.92,0,0,1,1.6-.1l47.25,21.17a2,2,0,0,1,1.21,2A42.24,42.24,0,0,1,176,210Z"}))],["regular",t.createElement(t.Fragment,null,t.createElement("path",{d:"M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0s.08,0,.11,0A40.21,40.21,0,0,1,176,208Z"}))],["thin",t.createElement(t.Fragment,null,t.createElement("path",{d:"M220.78,162.13,173.56,141A12,12,0,0,0,162.18,142a3.37,3.37,0,0,0-.38.28L137,163.42a3.93,3.93,0,0,1-3.7.21c-16.24-7.84-33.05-24.52-40.89-40.57a3.9,3.9,0,0,1,.18-3.69l21.2-25.21c.1-.12.19-.25.28-.38a12,12,0,0,0,1-11.36L93.9,35.28a12,12,0,0,0-12.48-7.19A52.25,52.25,0,0,0,36,80c0,77.2,62.8,140,140,140a52.25,52.25,0,0,0,51.91-45.42A12,12,0,0,0,220.78,162.13ZM220,173.58A44.23,44.23,0,0,1,176,212C103.22,212,44,152.78,44,80A44.23,44.23,0,0,1,82.42,36a3.87,3.87,0,0,1,.48,0,4,4,0,0,1,3.67,2.49l21.11,47.14a4,4,0,0,1-.23,3.6l-21.19,25.2c-.1.13-.2.25-.29.39a12,12,0,0,0-.78,11.75c8.69,17.79,26.61,35.58,44.6,44.27a12,12,0,0,0,11.79-.87l.37-.28,24.83-21.12a3.93,3.93,0,0,1,3.57-.27l47.21,21.16A4,4,0,0,1,220,173.58Z"}))]]),oe=t.forwardRef((r,o)=>t.createElement(ie,{ref:o,...r,weights:ke}));oe.displayName="BellIcon";const le=oe,de=t.forwardRef((r,o)=>t.createElement(ie,{ref:o,...r,weights:Ce}));de.displayName="PhoneIcon";const ze=de,ae=()=>{const r=t.useRef(null);return t.useEffect(()=>{const o=r.current;if(!o)return;const i=o.getContext("2d");let b,m=[];const u=()=>{o.width=window.innerWidth,o.height=window.innerHeight};u(),window.addEventListener("resize",u),(()=>{m=[];const n=Math.floor(o.width*o.height/8e3);for(let p=0;p<n;p++)m.push({x:Math.random()*o.width,y:Math.random()*o.height,size:Math.random()*2+.5,speedX:(Math.random()-.5)*.3,speedY:(Math.random()-.5)*.3,opacity:Math.random()*.8+.2,twinkle:Math.random()*.02,twinkleDir:1,hue:Math.random()>.8?Math.random()*60+30:0,isGold:Math.random()>.85})})();const A=()=>{if(i.clearRect(0,0,o.width,o.height),m.forEach(n=>{if(n.x+=n.speedX,n.y+=n.speedY,n.x<0&&(n.x=o.width),n.x>o.width&&(n.x=0),n.y<0&&(n.y=o.height),n.y>o.height&&(n.y=0),n.opacity+=n.twinkle*n.twinkleDir,n.opacity>1&&(n.opacity=1,n.twinkleDir=-1),n.opacity<.1&&(n.opacity=.1,n.twinkleDir=1),i.beginPath(),i.arc(n.x,n.y,n.size,0,Math.PI*2),n.isGold)i.fillStyle=`rgba(212, 175, 55, ${n.opacity})`,i.shadowColor="#D4AF37",i.shadowBlur=8;else{const p=Math.random()>.5?255:200;i.fillStyle=`rgba(255, 255, ${p}, ${n.opacity*.7})`,i.shadowColor="rgba(255, 255, 255, 0.5)",i.shadowBlur=4}i.fill(),i.shadowBlur=0}),Math.random()>.995){const n=Math.random()*o.width,p=Math.random()*o.height*.5,C=i.createLinearGradient(n,p,n+100,p+60);C.addColorStop(0,"rgba(212, 175, 55, 0.8)"),C.addColorStop(1,"rgba(212, 175, 55, 0)"),i.beginPath(),i.moveTo(n,p),i.lineTo(n+100,p+60),i.strokeStyle=C,i.lineWidth=2,i.stroke()}b=requestAnimationFrame(A)};return A(),()=>{window.removeEventListener("resize",u),cancelAnimationFrame(b)}},[]),e.jsx("canvas",{ref:r,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none",background:"linear-gradient(180deg, #0a0a0f 0%, #0d0d15 50%, #0a0a0f 100%)"}})},De=({onLogin:r,instructors:o})=>{const[i,b]=t.useState(""),[m,u]=t.useState(""),[g,A]=t.useState(""),[n,p]=t.useState(!1),C=async()=>{p(!0),A("");try{console.log("ðŸ” [ê°•ì‚¬ ë¡œê·¸ì¸ ì‹œë„]"),console.log("  - ì„ íƒí•œ ì´ë¦„:",i),console.log("  - ìž…ë ¥í•œ ë²ˆí˜¸:",m),console.log("  - trim í›„ ì´ë¦„:",i.trim()),console.log("  - trim í›„ ë²ˆí˜¸:",m.trim());const y=await B.loginInstructor(i.trim(),m.trim());console.log("  - ê²°ê³¼:",y),y.success?r(y.name):A(y.message||"ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤")}catch(y){console.error("  - ì—ëŸ¬:",y),A("ì¸ì¦ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.")}finally{p(!1)}};return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",position:"relative",zIndex:1},children:e.jsxs("div",{style:{background:"rgba(20, 20, 25, 0.95)",padding:"40px",borderRadius:"20px",maxWidth:"400px",width:"100%",textAlign:"center",border:"1px solid rgba(212, 175, 55, 0.2)"},children:[e.jsx("img",{src:"/logo_circle.png",alt:"ë³µìƒ˜ìš”ê°€",style:{width:"70px",height:"70px",marginBottom:"16px",filter:"drop-shadow(0 0 10px rgba(212, 175, 55, 0.5))"}}),e.jsx("h1",{style:{color:"var(--primary-gold)",marginBottom:"8px",fontSize:"1.8rem"},children:"ë³µìƒ˜ìš”ê°€ ì„ ìƒë‹˜"}),e.jsx("div",{style:{color:"var(--text-secondary)",marginBottom:"30px"},children:"ì„ ìƒë‹˜ ì „ìš© ì•±ìž…ë‹ˆë‹¤"}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"var(--bg-input)",padding:"12px 16px",borderRadius:"10px",marginBottom:"12px"},children:[e.jsx(fe,{size:20,color:"var(--text-secondary)"}),e.jsxs("select",{value:i,onChange:y=>b(y.target.value),style:{flex:1,background:"transparent",border:"none",color:"var(--text-primary)",fontSize:"1rem",outline:"none"},children:[e.jsx("option",{value:"",children:"ì„ ìƒë‹˜ ì„ íƒ"}),o.map(y=>{const M=typeof y=="string"?y:y.name;return e.jsx("option",{value:M,children:M},M)})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",background:"var(--bg-input)",padding:"12px 16px",borderRadius:"10px"},children:[e.jsx(ze,{size:20,color:"var(--text-secondary)"}),e.jsx("input",{type:"tel",value:m,onChange:y=>{const M=y.target.value.replace(/[^0-9]/g,"");u(M.slice(0,4))},placeholder:"ì „í™”ë²ˆí˜¸ ë’¤ 4ìžë¦¬",maxLength:4,inputMode:"numeric",pattern:"[0-9]*",style:{flex:1,background:"transparent",border:"none",color:"var(--text-primary)",fontSize:"1rem",outline:"none"}})]})]}),g&&e.jsx("p",{style:{color:"#ff4757",marginBottom:"16px",fontSize:"0.9rem"},children:g}),e.jsx("button",{onClick:C,disabled:!i||m.length!==4||n,style:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",background:i&&m.length===4&&!n?"var(--primary-gold)":"var(--bg-input)",color:i&&m.length===4&&!n?"black":"var(--text-secondary)",fontWeight:"bold",fontSize:"1rem",cursor:"pointer"},children:n?"ë¡œê·¸ì¸ ì¤‘...":"ë¡œê·¸ì¸"})]})})},re={background:"var(--bg-input)",border:"none",color:"var(--text-primary)",width:"36px",height:"36px",borderRadius:"50%",cursor:"pointer",fontSize:"1rem"},Me=({instructorName:r})=>{const[o,i]=t.useState(new Date),[b,m]=t.useState({}),[u,g]=t.useState(null),[A,n]=t.useState([]),[p,C]=t.useState(null),[y,M]=t.useState(!1),z=o.getFullYear(),f=o.getMonth()+1,R=t.useMemo(()=>[{id:"gwangheungchang",name:"ê´‘í¥ì°½ì ",color:"var(--primary-gold)"},{id:"mapo",name:"ë§ˆí¬ì ",color:"#3B82F6"}],[]);t.useEffect(()=>{(async()=>{const s=R.map(x=>ge(x.id,z,f)),d=await Promise.all(s),a={};d.forEach((x,L)=>{const j=R[L];Object.entries(x).forEach(([h,c])=>{a[h]||(a[h]=[]);const D=c.map(k=>({...k,branchName:j.name,branchColor:j.color}));a[h]=[...a[h],...D]})}),m(a)})()},[z,f,R]),t.useEffect(()=>{if(!u)return;(async()=>{M(!0);try{const s=R.map(x=>B.getAttendanceByDate(u,x.id)),d=await Promise.all(s);let a=[];d.forEach(x=>{a=[...a,...x||[]]}),n(a)}catch(s){console.error("Failed to load date attendance:",s)}finally{M(!1)}})(),C(null)},[u,R]);const H=new Date(z,f,0).getDate(),N=new Date(z,f-1,1).getDay(),_=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "],T=l=>{const d=(b[l]||[]).filter(a=>a.instructor===r&&a.status!=="cancelled");return{hasGhc:d.some(a=>a.branchName==="ê´‘í¥ì°½ì "||a.branchId==="gwangheungchang"),hasMapo:d.some(a=>a.branchName==="ë§ˆí¬ì "||a.branchId==="mapo"),hasAny:d.length>0}},G=()=>{const l=[];for(let s=0;s<N;s++)l.push(e.jsx("div",{style:{padding:"8px"}},`empty-${s}`));for(let s=1;s<=H;s++){const d=`${z}-${String(f).padStart(2,"0")}-${String(s).padStart(2,"0")}`,{hasGhc:a,hasMapo:x}=T(d),L=u===d,j=d===new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),h=new Date(z,f-1,s).getDay(),c=h===0||we(d),D=h===6&&!c,k=Se(d);let v="none",w;a&&x?(v="2px solid",w="var(--primary-gold) #3B82F6 #3B82F6 var(--primary-gold)"):a?v="2px solid var(--primary-gold)":x&&(v="2px solid #3B82F6"),(a||x)&&!b[d]?.length&&console.warn(`[Calendar] Border applied but no classes found for ${d}? GHC:${a}, MAPO:${x}`);let $="var(--text-primary)";L?$="black":c?$="#ff4757":D&&($="#4a90e2");const S={holiday_new_year:"ì‹ ì •",holiday_lunar_new_year:"ì„¤ë‚ ",holiday_samiljeol:"ì‚¼ì¼ì ˆ",holiday_childrens_day:"ì–´ë¦°ì´ë‚ ",holiday_buddha:"ì„ê°€íƒ„ì‹ ì¼",holiday_memorial:"í˜„ì¶©ì¼",holiday_liberation:"ê´‘ë³µì ˆ",holiday_chuseok:"ì¶”ì„",holiday_foundation:"ê°œì²œì ˆ",holiday_hangul:"í•œê¸€ë‚ ",holiday_christmas:"í¬ë¦¬ìŠ¤ë§ˆìŠ¤",holiday_election:"ì„ ê±°ì¼",holiday_arbor_day:"ì‹ëª©ì¼"};l.push(e.jsxs("div",{onClick:()=>g(d),style:{padding:"4px",textAlign:"center",cursor:"pointer",borderRadius:"8px",background:L?"var(--primary-gold)":j?"rgba(212, 175, 55, 0.15)":"transparent",color:$,border:v,borderColor:w!=="transparent"?w:void 0,fontWeight:a||x?"bold":"normal",transition:"all 0.2s",position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"52px"},children:[e.jsx("span",{style:{position:"relative",zIndex:1,fontSize:"1rem"},children:s}),k&&e.jsx("span",{style:{fontSize:"0.6rem",marginTop:"2px",color:L?"black":"#ff4757",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"100%",textOverflow:"ellipsis"},children:S[k]||k})]},s))}return l},P=u?b[u]||[]:[];return P.sort((l,s)=>l.time.localeCompare(s.time)),e.jsxs("div",{style:{padding:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("button",{onClick:()=>i(new Date(z,f-2,1)),style:re,children:"â—€"}),e.jsxs("h2",{style:{margin:0,fontSize:"1.2rem"},children:[z,"ë…„ ",f,"ì›”"]}),e.jsx("button",{onClick:()=>i(new Date(z,f,1)),style:re,children:"â–¶"})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:"16px",fontSize:"0.85rem",color:"var(--text-secondary)",animation:"fadeIn 1s ease"},children:"ðŸ‘‡ ë‚ ì§œë¥¼ í„°ì¹˜í•˜ë©´ ìƒì„¸ ì‹œê°„í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìžˆì–´ìš”"}),e.jsxs("div",{style:{marginBottom:"20px",background:"rgba(255, 255, 255, 0.05)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{fontSize:"0.9rem",color:"var(--text-secondary)",marginBottom:"10px",textAlign:"center"},children:"ðŸ“… ì§€ì ë³„ ì¼ì • í™•ì¸"}),e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",background:"transparent",border:"3px solid var(--primary-gold)",boxShadow:"0 0 10px rgba(212, 175, 55, 0.2)"}}),e.jsx("span",{style:{color:"white",fontSize:"1rem",fontWeight:"bold"},children:"ê´‘í¥ì°½ì "})]}),e.jsx("div",{style:{width:"1px",background:"rgba(255, 255, 255, 0.2)"}}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"24px",height:"24px",borderRadius:"6px",background:"transparent",border:"3px solid #3B82F6",boxShadow:"0 0 10px rgba(59, 130, 246, 0.2)"}}),e.jsx("span",{style:{color:"white",fontSize:"1rem",fontWeight:"bold"},children:"ë§ˆí¬ì "})]})]})]}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"8px"},children:_.map(l=>e.jsx("div",{style:{textAlign:"center",fontSize:"0.85rem",color:"var(--text-secondary)",padding:"8px"},children:l},l))}),e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"4px",marginBottom:"20px"},children:G()}),u&&e.jsxs("div",{style:{background:"var(--bg-surface)",padding:"16px",borderRadius:"12px"},children:[e.jsxs("h3",{style:{marginBottom:"12px",fontSize:"1rem"},children:[u," ìˆ˜ì—…"]}),P.length===0?e.jsx("p",{style:{color:"var(--text-secondary)"},children:"ìˆ˜ì—…ì´ ì—†ìŠµë‹ˆë‹¤"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:P.map((l,s)=>{const d=l.status==="cancelled";return e.jsxs("div",{onClick:()=>{if(!d&&l.instructor===r){const a=`${l.time}_${l.title}`;C(p===a?null:a)}},style:{padding:"12px",borderRadius:"8px",background:d?"rgba(255, 71, 87, 0.1)":l.instructor===r?"rgba(212, 175, 55, 0.1)":"var(--bg-input)",borderLeft:`4px solid ${d?"#ff4757":l.branchColor||"var(--primary-gold)"}`,position:"relative",opacity:d?.7:1,cursor:!d&&l.instructor===r?"pointer":"default",border:p===`${l.time}_${l.title}`?`1px solid ${l.branchColor}`:"none"},children:[e.jsxs("div",{style:{position:"absolute",top:"12px",right:"12px",display:"flex",gap:"6px"},children:[d&&e.jsx("div",{style:{fontSize:"0.75rem",color:"#ff4757",fontWeight:"bold",border:"1px solid #ff4757",padding:"2px 6px",borderRadius:"4px",background:"rgba(255, 71, 87, 0.1)"},children:"íœ´ê°•"}),e.jsx("div",{style:{fontSize:"0.75rem",color:l.branchColor,fontWeight:"bold",border:`1px solid ${l.branchColor}`,padding:"2px 6px",borderRadius:"4px"},children:l.branchName})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"4px"},children:[e.jsx("span",{style:{fontWeight:"bold",fontSize:"1.1rem",textDecoration:d?"line-through":"none"},children:l.time}),l.instructor===r&&!d&&e.jsx("span",{style:{fontSize:"0.75rem",background:"var(--primary-gold)",color:"black",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},children:"ë‚´ ìˆ˜ì—…"})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("div",{style:{fontSize:"0.95rem",textDecoration:d?"line-through":"none",color:d?"var(--text-secondary)":"var(--text-primary)"},children:l.title}),e.jsx("span",{style:{fontSize:"0.85rem",color:"var(--text-secondary)",marginRight:d?"0":"60px"},children:l.instructor})]}),p===`${l.time}_${l.title}`&&e.jsxs("div",{style:{marginTop:"12px",paddingTop:"12px",borderTop:"1px solid rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--primary-gold)",marginBottom:"8px",fontWeight:"bold"},children:"ðŸ‘¥ ì¶œì„ ëª…ë‹¨"}),y?e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:"ì¡°íšŒ ì¤‘..."}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:A.filter(a=>a.className===l.title&&(a.instructor===l.instructor||a.instructor==="ë¯¸ì§€ì •")).length===0?e.jsx("div",{style:{fontSize:"0.8rem",color:"var(--text-secondary)",fontStyle:"italic"},children:"ì¶œì„ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤"}):A.filter(a=>a.className===l.title&&(a.instructor===l.instructor||a.instructor==="ë¯¸ì§€ì •")).map((a,x)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",background:"rgba(255,255,255,0.05)",padding:"6px 10px",borderRadius:"4px"},children:[e.jsx("span",{style:{fontSize:"0.85rem"},children:a.memberName}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--primary-gold)"},children:a.timestamp?new Date(a.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}):""})]},a.id||x))})]})]},s)})})]})]})},Ee=({isOpen:r,onClose:o,imageSrc:i})=>!r||!i?null:Ae.createPortal(e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"black",zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",padding:"20px",backdropFilter:"none"},onClick:o,children:[e.jsx("button",{onClick:o,style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.15)",border:"none",borderRadius:"50%",width:"44px",height:"44px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white",zIndex:1e4,backdropFilter:"blur(4px)"},children:e.jsx(xe,{size:28})}),e.jsx("img",{src:i,alt:"Enlarged view",style:{maxWidth:"100%",maxHeight:"90vh",objectFit:"contain",borderRadius:"4px",boxShadow:"0 4px 30px rgba(0,0,0,0.5)"},onClick:b=>b.stopPropagation()})]}),document.body),Be=()=>{const[r,o]=t.useState([]),[i,b]=t.useState(!0),[m,u]=t.useState(null);return t.useEffect(()=>{(async()=>{try{const n=await B.loadNotices();o(n||[])}catch(n){console.error("Failed to load notices:",n)}finally{b(!1)}})();const A=B.subscribe(()=>{o(B.getNotices()||[])});return()=>A()},[]),i?e.jsx("div",{style:{padding:"20px",textAlign:"center",color:"var(--text-secondary)"},children:"ë¡œë”© ì¤‘..."}):e.jsxs("div",{style:{padding:"16px"},children:[e.jsx("h2",{style:{fontSize:"1.2rem",marginBottom:"16px"},children:"ê³µì§€"}),r.length===0?e.jsx("p",{style:{color:"var(--text-secondary)"},children:"ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤"}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:r.map((g,A)=>e.jsxs("div",{style:{background:"var(--bg-surface)",padding:"16px",borderRadius:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem"},children:g.title}),e.jsx("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:g.createdAt?new Date(g.createdAt).toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}):""})]}),(g.images&&g.images.length>0||g.image||g.imageUrl)&&e.jsx("div",{style:{display:"flex",gap:"10px",overflowX:"auto",paddingBottom:"10px",marginBottom:"12px",scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch"},children:g.images&&g.images.length>0?g.images.map((n,p)=>e.jsx("img",{src:n,alt:g.title,style:{minWidth:"280px",maxWidth:"100%",height:"auto",maxHeight:"300px",objectFit:"cover",borderRadius:"8px",scrollSnapAlign:"start",cursor:"pointer"},onClick:()=>u(n)},p)):e.jsx("img",{src:g.image||g.imageUrl,alt:g.title,style:{width:"100%",borderRadius:"8px",cursor:"pointer"},onClick:()=>u(g.image||g.imageUrl)})}),e.jsx("p",{style:{margin:0,fontSize:"0.9rem",color:"var(--text-secondary)",whiteSpace:"pre-wrap"},children:g.content})]},g.id||A))}),e.jsx(Ee,{isOpen:!!m,imageSrc:m,onClose:()=>u(null)})]})},Re=({instructorName:r,attendance:o,attendanceLoading:i,instructorClasses:b=[]})=>{const[m,u]=t.useState(!1),[g,A]=t.useState(!1),[n,p]=t.useState(""),[C,y]=t.useState(null),[M,z]=t.useState(!1),[f,R]=t.useState("unknown"),H=new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"});t.useEffect(()=>{typeof window<"u"&&"Notification"in window&&u(window.Notification.permission==="granted");const s=navigator.userAgent.toLowerCase();/iphone|ipad|ipod/.test(s)?R("ios"):/android/.test(s)&&R("android");const d=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0;z(d);const a=x=>{x.preventDefault(),y(x)};return window.addEventListener("beforeinstallprompt",a),()=>{window.removeEventListener("beforeinstallprompt",a)}},[]);const N=async()=>{A(!0),p("");try{if(!("Notification"in window)){p("âŒ ì´ ë¸Œë¼ìš°ì €ëŠ” ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. "+(f==="ios"?"ì•„ì´í°ì€ 'í™ˆ í™”ë©´ì— ì¶”ê°€'ë¥¼ í†µí•´ ì•±ì„ ì„¤ì¹˜í•´ì•¼ ì•Œë¦¼ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.":"í¬ë¡¬ ë“± ìµœì‹  ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”."));return}const s=await window.Notification.requestPermission();if(s==="granted"){const d=await me(ue,{vapidKey:"BOz8GOOsVZsK9FJ6jS-w25tiMJk-YhdGmxvZNi2Q1gfY9Kmip4SOF0JAj0nl7aZKkAiAk6_wjb5AOzFZ2BHhDw0"});d?(await B.saveInstructorToken(d,r),u(!0),p("âœ… ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!")):p("âŒ í† í°ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")}else s==="denied"&&p("âŒ ì•Œë¦¼ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ í—ˆìš©í•´ì£¼ì„¸ìš”.")}catch(s){console.error("Push setup failed:",s),p("âŒ ì•Œë¦¼ ì„¤ì • ì‹¤íŒ¨: "+s.message)}finally{A(!1)}},_=()=>{p(`â„¹ï¸ ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì•Œë¦¼ì„ ëŒ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
ì‚¬ì´íŠ¸ ì„¤ì • > ì•Œë¦¼ > ì°¨ë‹¨`)},T=async()=>{if(C){C.prompt();const{outcome:s}=await C.userChoice;s==="accepted"&&z(!0),y(null)}else p(f==="ios"?'â„¹ï¸ ì•„ì´í° ì„¤ì¹˜ ë°©ë²•: Safari í•˜ë‹¨ ê³µìœ  ë²„íŠ¼(â†‘) í´ë¦­ > "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.':f==="android"?'â„¹ï¸ ì•ˆë“œë¡œì´ë“œ ì„¤ì¹˜ ë°©ë²•: ë¸Œë¼ìš°ì € ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´(â‹®) í´ë¦­ > "í™ˆ í™”ë©´ì— ì¶”ê°€" í˜¹ì€ "ì•± ì„¤ì¹˜"ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.':'â„¹ï¸ ë¸Œë¼ìš°ì € ë©”ë‰´ì—ì„œ "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ì„ íƒí•˜ì—¬ ì•±ì„ ì„¤ì¹˜í•˜ì‹¤ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.')},G=o.filter(s=>s.branchName==="ê´‘í¥ì°½ì "||s.branchId==="gwangheungchang"),P=o.filter(s=>s.branchName==="ë§ˆí¬ì "||s.branchId==="mapo"),l=(s,d,a,x)=>{const L=b.filter(c=>c.branchId===x);if(s.length===0&&L.length===0)return null;const j=he(),h=(c,D=60)=>{const[k,v]=c.split(":").map(Number),w=k*60+v,$=w+D;return j<w?{label:"ì˜ˆì •",color:"#FFD93D"}:j>=w&&j<$?{label:"ì§„í–‰ ì¤‘",color:"#4CAF50"}:{label:"ì¢…ë£Œ",color:"gray"}};return e.jsxs("div",{style:{marginTop:"16px",background:"rgba(255,255,255,0.02)",padding:"16px",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[e.jsxs("h4",{style:{margin:"0 0 12px",fontSize:"0.95rem",color:a,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:a}}),d]}),e.jsxs("span",{style:{opacity:.6,fontSize:"0.8rem",fontWeight:"normal"},children:["ì´ ",s.length,"ëª… ì¶œì„"]})]}),e.jsx("div",{style:{marginBottom:"16px",display:"flex",flexWrap:"wrap",gap:"8px"},children:L.map((c,D)=>{const k=h(c.time,c.duration);return e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",padding:"6px 10px",borderRadius:"6px",fontSize:"0.75rem",border:`1px solid ${k.color}44`,display:"flex",alignItems:"center",gap:"6px"},children:[e.jsxs("span",{style:{color:k.color,fontWeight:"bold"},children:["â€¢ ",k.label]}),e.jsxs("span",{style:{color:"white"},children:[c.time," ",c.title]})]},D)})}),s.length>0?e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.map((c,D)=>e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255,255,255,0.03)",borderRadius:"6px",borderLeft:`2px solid ${a}`},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{fontWeight:"bold",fontSize:"0.9rem",display:"flex",alignItems:"center",gap:"6px"},children:[c.memberName,c.startDate&&(()=>{const v=new Date(c.startDate);return(new Date-v)/(1e3*60*60*24)<=14})()?e.jsx("span",{style:{fontSize:"0.65rem",background:"#ff4757",color:"white",padding:"1px 6px",borderRadius:"4px",fontWeight:"bold"},children:"ì‹ ê·œ"}):null]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"var(--text-secondary)",display:"flex",gap:"8px",marginTop:"2px"},children:[e.jsx("span",{children:c.className}),(c.credits!==void 0||c.endDate)&&e.jsxs("span",{style:{color:"var(--primary-gold)",opacity:.9},children:[c.credits!==void 0&&`${c.credits}íšŒ `,c.endDate&&`/ ~${c.endDate.slice(2)}`]})]})]}),e.jsx("div",{style:{color:"var(--primary-gold)",fontWeight:"bold",fontSize:"0.85rem"},children:c.timestamp?new Date(c.timestamp).toLocaleTimeString("ko-KR",{hour:"2-digit",minute:"2-digit",hour12:!1}):""})]},c.id||D))}):e.jsx("div",{style:{fontSize:"0.8rem",color:"rgba(255,255,255,0.3)",padding:"8px",textAlign:"center",border:"1px dashed rgba(255,255,255,0.1)",borderRadius:"6px"},children:"ì¶œì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"})]})};return e.jsxs("div",{style:{padding:"16px"},children:[e.jsxs("div",{style:{background:"var(--bg-surface)",padding:"20px",borderRadius:"12px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem"},children:"ðŸ“‹ ë‚˜ì˜ ì˜¤ëŠ˜ ì¶œì„í˜„í™©"}),e.jsxs("span",{style:{fontSize:"0.8rem",color:"var(--text-secondary)"},children:[H," (",o.length,"ëª…)"]})]}),i?e.jsx("div",{style:{textAlign:"center",color:"var(--text-secondary)",padding:"20px"},children:"ë¡œë”© ì¤‘..."}):e.jsx(e.Fragment,{children:G.length===0&&P.length===0&&b.length===0?e.jsxs("div",{style:{textAlign:"center",padding:"40px 20px",color:"var(--text-secondary)",background:"rgba(255,255,255,0.02)",borderRadius:"12px",marginTop:"10px",border:"1px dashed rgba(255,255,255,0.1)"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"12px"},children:"â˜•"}),e.jsx("div",{style:{fontSize:"0.95rem",fontWeight:"bold",color:"white",marginBottom:"4px"},children:"ì˜¤ëŠ˜ì€ ìˆ˜ì—… ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤"}),e.jsx("div",{style:{fontSize:"0.85rem",opacity:.7},children:"íŽ¸ì•ˆí•œ íœ´ì‹ê³¼ ì¶©ì „ì˜ ì‹œê°„ ë˜ì‹œê¸¸ ë°”ëžë‹ˆë‹¤!"})]}):e.jsxs(e.Fragment,{children:[l(G,"ê´‘í¥ì°½ì ","var(--primary-gold)","gwangheungchang"),l(P,"ë§ˆí¬ì ","#3B82F6","mapo")]})})]}),e.jsxs("div",{style:{background:"var(--bg-surface)",padding:"20px",borderRadius:"12px",marginBottom:"16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[m?e.jsx(te,{size:24,color:"var(--primary-gold)",weight:"fill"}):e.jsx(le,{size:24,color:"var(--text-secondary)"}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem"},children:"ë‚˜ì˜ ìˆ˜ì—… ì¶œì„íšŒì› ì•Œë¦¼"}),e.jsx("div",{style:{margin:"2px 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:"íšŒì› ì¶œì„ ì‹œ ì•Œë¦¼ ë°›ê¸°"})]})]}),m?e.jsxs("button",{onClick:_,style:{width:"100%",padding:"10px",borderRadius:"8px",border:"none",background:"rgba(76, 175, 80, 0.2)",color:"#4CAF50",fontWeight:"bold",fontSize:"0.9rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},children:[e.jsx(te,{size:18,weight:"fill"})," ì•Œë¦¼ ON"]}):e.jsx("button",{onClick:N,disabled:g,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"none",background:g?"var(--bg-input)":"var(--primary-gold)",color:g?"var(--text-secondary)":"black",fontWeight:"bold",fontSize:"0.9rem",cursor:"pointer"},children:g?"ì„¤ì • ì¤‘...":"ðŸ”” ì•Œë¦¼ í—ˆìš©í•˜ê¸°"}),n&&e.jsx("div",{style:{marginTop:"8px",fontSize:"0.85rem",textAlign:"center",color:n.includes("âœ…")?"#4CAF50":"var(--text-secondary)",whiteSpace:"pre-line"},children:n})]}),!M&&e.jsxs("div",{style:{background:"var(--bg-surface)",padding:"20px",borderRadius:"12px",marginBottom:"16px",border:f==="ios"?"1px solid rgba(59, 130, 246, 0.3)":"1px solid rgba(212, 175, 55, 0.3)",boxShadow:f==="ios"?"0 0 15px rgba(59, 130, 246, 0.1)":"0 0 15px rgba(212, 175, 55, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"12px"},children:[e.jsx("div",{style:{background:f==="ios"?"#3B82F6":"var(--primary-gold)",borderRadius:"10px",padding:"8px",display:"flex"},children:f==="ios"?e.jsx(ne,{size:24,color:"white",weight:"bold"}):e.jsx(Q,{size:24,color:"black",style:{transform:"rotate(-90deg)"}})}),e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0,fontSize:"1rem",color:"white"},children:f==="ios"?"ì•„ì´í°ì— ì•± ì„¤ì¹˜í•˜ê¸°":"í™ˆ í™”ë©´ì— ì•± ì„¤ì¹˜í•˜ê¸°"}),e.jsx("div",{style:{margin:"2px 0 0",fontSize:"0.8rem",color:"var(--text-secondary)"},children:f==="ios"?"ì‚¬íŒŒë¦¬(Safari)ì—ì„œ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”":"ì•±ì²˜ëŸ¼ íŽ¸í•˜ê²Œ ì•„ì´ì½˜ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”"})]})]}),f==="ios"?e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",padding:"12px",borderRadius:"8px",marginTop:"10px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",fontSize:"0.9rem"},children:[e.jsx("span",{style:{background:"#3B82F6",color:"white",width:"20px",height:"20px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:"1"}),e.jsxs("span",{style:{color:"#e0e0e0"},children:["í•˜ë‹¨ ",e.jsx(ne,{size:16,weight:"bold",style:{verticalAlign:"middle",margin:"0 2px"}})," ",e.jsx("strong",{children:"ê³µìœ  ë²„íŠ¼"})," í´ë¦­"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"0.9rem"},children:[e.jsx("span",{style:{background:"#3B82F6",color:"white",width:"20px",height:"20px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",fontWeight:"bold"},children:"2"}),e.jsxs("span",{style:{color:"#e0e0e0"},children:[e.jsx(ve,{size:16,weight:"bold",style:{verticalAlign:"middle",margin:"0 2px"}})," ",e.jsx("strong",{children:"í™ˆ í™”ë©´ì— ì¶”ê°€"})," ì„ íƒ"]})]})]}):e.jsxs("button",{onClick:T,style:{width:"100%",padding:"14px",borderRadius:"10px",border:"none",background:"var(--primary-gold)",color:"black",fontWeight:"bold",fontSize:"1rem",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:"0 4px 10px rgba(0,0,0,0.3)"},children:[e.jsx(Q,{size:20,style:{transform:"rotate(-90deg)"}})," í°ì— ì•± ì„¤ì¹˜í•˜ê¸°"]})]}),e.jsxs("div",{style:{textAlign:"center",fontSize:"0.75rem",opacity:.6,color:"var(--text-secondary)",padding:"20px 8px"},children:[e.jsxs("div",{style:{marginBottom:"4px",fontSize:"0.85rem"},children:[r," ì„ ìƒë‹˜ìœ¼ë¡œ ë¡œê·¸ì¸ë¨"]}),e.jsxs("div",{style:{fontSize:"0.75rem",display:"flex",flexDirection:"column",gap:"2px"},children:[e.jsxs("span",{children:["v2026.02.19.2 | Date: ",H]}),e.jsxs("span",{children:["User: [",r,"] (",r.trim().length,")"]}),e.jsxs("span",{children:["Classes: ",b.length," / Att: ",o.length]})]})]})]})},se=(r,o,i)=>{const b=o<12?"ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”":o<17?"ì˜¤ëŠ˜ë„ ì¢‹ì€ ì˜¤í›„ì˜ˆìš”":"ìˆ˜ê³ í•˜ì…¨ì–´ìš”";return`${r} ì„ ìƒë‹˜, ${b} ðŸ§˜â€â™€ï¸ ${i==="ì›”"?"ìƒˆë¡œìš´ í•œ ì£¼ì˜ ì‹œìž‘!":i==="ê¸ˆ"?"ì¦ê±°ìš´ ê¸ˆìš”ì¼!":i==="í† "||i==="ì¼"?"í–‰ë³µí•œ ì£¼ë§!":""}`},Pe=()=>{const[r,o]=t.useState(localStorage.getItem("instructorName")||""),[i,b]=t.useState([]),[m,u]=t.useState("home"),[g,A]=t.useState(!0),n=t.useRef([]),p=t.useRef(""),[C,y]=t.useState(""),[M,z]=t.useState(!1),[f,R]=t.useState(null),[H,N]=t.useState(!1),[_,T]=t.useState([]),[G,P]=t.useState([]),[l,s]=t.useState(!0),d=t.useMemo(()=>new Date().toLocaleDateString("sv-SE",{timeZone:"Asia/Seoul"}),[]),a=ye(),x=t.useMemo(()=>[{id:"gwangheungchang",name:"ê´‘í¥ì°½ì "},{id:"mapo",name:"ë§ˆí¬ì "}],[]);t.useEffect(()=>{(async()=>{try{const h=await B.getInstructors();h&&h.length>0&&b(h)}catch(h){console.error("Failed to load instructors:",h)}finally{A(!1)}})()},[]),t.useEffect(()=>{const j=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,h=localStorage.getItem("has_seen_inst_install_guide");if(!j&&!h){const c=setTimeout(()=>{N(!0),localStorage.setItem("has_seen_inst_install_guide","true")},3e3);return()=>clearTimeout(c)}},[]),t.useEffect(()=>{if(!r)return;(async()=>setTimeout(async()=>{try{console.log(`[InstructorPage] Attempting push registration for: ${r}`),await B.requestInstructorPushPermission(r)}catch(h){console.error("[InstructorPage] Push registration failed:",h)}},5e3))()},[r]),t.useEffect(()=>r?((async()=>{try{const h=x.map(S=>B.getDailyClasses(S.id,r)),c=x.map(S=>B.getAttendanceByDate(d,S.id)),[D,k]=await Promise.all([Promise.all(h),Promise.all(c)]);let v=[];D.forEach((S,Z)=>{const U=x[Z].name,W=x[Z].id,Y=(S||[]).map(O=>({...O,branchName:U,branchId:W}));v=[...v,...Y]}),P(v);let w=[];k.forEach((S,Z)=>{const U=x[Z].name,W=x[Z].id,Y=v.filter(E=>E.branchId===W),O=new Set(Y.map(E=>E.title));console.log(`[InstructorPage] Branch: ${W}, Fetched: ${S?.length} logs`);const q=(S||[]).filter(E=>{const V=E.instructor?E.instructor.trim():"",X=r.trim(),I=V===X,F=V==="ë¯¸ì§€ì •"||!V,K=O.has(E.className);return F&&K&&console.log("[InstructorPage] Included Undesignated:",E),I||F&&K}).map(E=>({...E,branchName:U,branchId:W}));w=[...w,...q]}),w.forEach(S=>S._ts=new Date(S.timestamp).getTime()),T(w.sort((S,Z)=>Z._ts-S._ts)),s(!1);const $=x.map(S=>B.subscribeAttendance(d,S.id,Z=>{T(U=>{const W=U.filter(I=>I.branchId!==S.id),Y=S.name,O=S.id,q=v.filter(I=>I.branchId===O),E=new Set(q.map(I=>I.title)),V=(Z||[]).filter(I=>{const F=I.instructor?I.instructor.trim():"",K=r.trim(),ee=F===K,ce=F==="ë¯¸ì§€ì •"||!F,pe=E.has(I.className);return ee||ce&&pe}).map(I=>({...I,branchName:Y,branchId:O})),X=[...W,...V];return X.sort((I,F)=>{const K=I._ts||(I._ts=new Date(I.timestamp).getTime());return(F._ts||(F._ts=new Date(F.timestamp).getTime()))-K}),X})}));n.current=$}catch(h){console.error("Failed to load initial data:",h),s(!1)}})(),()=>{n.current&&n.current.forEach(h=>h())}):void 0,[r,d,x]),t.useEffect(()=>{if(!r)return;const j=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "][new Date().getDay()],h=`ai_greeting_${r}_${d}_${a}`,c=localStorage.getItem(h);y(c||se(r,a,j));const D=`${r}_${_.length}_${a}`,k=async()=>{if(!(l||p.current===D)){p.current=D,z(!0);try{const v=await B.getAIExperience(r,_.length,j,a,null,null,null,null,"ko",null,"instructor"),w=typeof v=="string"?v:v?.message||se(r,a,j,_.length);w&&w!==C&&!v?.isFallback?R(w):y(w),localStorage.setItem(h,w)}catch(v){console.error("AI greeting background fetch failed:",v)}finally{z(!1)}}};!l&&!c&&p.current!==D&&k()},[r,_.length,l,a,d]);const L=()=>{localStorage.removeItem("instructorName"),o(""),y(""),T([])};return g?e.jsx("div",{style:{minHeight:"100dvh",background:"var(--bg-primary)",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("div",{style:{textAlign:"center",color:"var(--primary-gold)"},children:"ë¡œë”© ì¤‘..."})}):r?e.jsxs("div",{style:{minHeight:"100vh",background:"transparent",paddingBottom:"80px",position:"relative"},children:[e.jsx(ae,{}),e.jsxs("div",{style:{background:"rgba(20, 20, 25, 0.95)",padding:"16px 20px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border-color)",position:"relative",zIndex:2},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{margin:0,fontSize:"1.2rem",color:"var(--primary-gold)"},children:"ë³µìƒ˜ìš”ê°€ ì„ ìƒë‹˜"}),e.jsxs("div",{style:{margin:"4px 0 0",fontSize:"0.9rem",color:"var(--text-secondary)"},children:[r," ì„ ìƒë‹˜"]})]}),e.jsx("button",{onClick:L,style:{background:"none",border:"none",cursor:"pointer"},children:e.jsx(Q,{size:24,color:"var(--text-secondary)"})})]}),e.jsxs("div",{style:{position:"relative",zIndex:1,background:"linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)",padding:"16px 20px",borderBottom:"1px solid rgba(212, 175, 55, 0.1)"},children:[e.jsxs("div",{style:{margin:0,fontSize:"1rem",lineHeight:1.5,color:"var(--text-primary)",textAlign:"center",fontStyle:"italic"},children:['"',C,'"']}),f&&e.jsxs("div",{style:{marginTop:"10px",padding:"10px 14px",background:"rgba(212,175,55,0.08)",border:"1px solid rgba(212,175,55,0.2)",borderRadius:"12px",animation:"slideUp 0.6s ease-out",display:"flex",alignItems:"flex-start",gap:"8px"},children:[e.jsx("span",{style:{fontSize:"1rem",flexShrink:0},children:"âœ¨"}),e.jsx("span",{style:{fontSize:"0.9rem",color:"rgba(255,255,255,0.85)",lineHeight:1.5,fontWeight:400,fontStyle:"italic",wordBreak:"keep-all"},children:f})]}),M&&e.jsxs("div",{style:{marginTop:"8px",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",animation:"fadeIn 0.3s ease-out"},children:[e.jsx("div",{className:"ai-thinking-icon",style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 256 256",fill:"var(--primary-gold)",children:e.jsx("path",{d:"M200,48H136V16a8,8,0,0,0-16,0V48H56A32,32,0,0,0,24,80v96a32,32,0,0,0,32,32h80v32a8,8,0,0,0,16,0V208h48a32,32,0,0,0,32-32V80A32,32,0,0,0,200,48ZM172,168H84a12,12,0,0,1,0-24h88a12,12,0,0,1,0,24Zm0-48H84a12,12,0,0,1,0-24h88a12,12,0,0,1,0,24Z"})})}),e.jsx("span",{style:{color:"rgba(212,175,55,0.7)",fontSize:"0.8rem",fontWeight:400,animation:"pulse 1.5s ease-in-out infinite"},children:"AIê°€ ì˜¤ëŠ˜ì˜ ì¸ì‚¬ë¥¼ ì¤€ë¹„í•˜ê³  ìžˆì–´ìš”"}),e.jsx("div",{style:{display:"flex",gap:"3px"},children:[0,1,2].map(j=>e.jsx("div",{style:{width:"4px",height:"4px",borderRadius:"50%",background:"var(--primary-gold)",opacity:.6,animation:`pulse 1.4s ease-in-out ${j*.2}s infinite`}},j))})]})]}),e.jsxs("div",{style:{position:"relative",zIndex:1,minHeight:"calc(100vh - 220px)"},children:[m==="home"&&e.jsx(Re,{instructorName:r,attendance:_,attendanceLoading:l,instructorClasses:G}),m==="schedule"&&e.jsx(Me,{instructorName:r}),m==="notices"&&e.jsx(Be,{})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,background:"var(--bg-surface)",display:"flex",justifyContent:"space-around",padding:"8px 0",borderTop:"1px solid var(--border-color)",zIndex:10},children:[e.jsx(J,{icon:e.jsx(je,{size:24}),label:"í™ˆ",active:m==="home",onClick:()=>u("home")}),e.jsx(J,{icon:e.jsx(be,{size:24}),label:"ì‹œê°„í‘œ",active:m==="schedule",onClick:()=>u("schedule")}),e.jsx(J,{icon:e.jsx(le,{size:24}),label:"ê³µì§€",active:m==="notices",onClick:()=>u("notices")})]}),e.jsx(Ie,{isOpen:H,onClose:()=>N(!1)})]}):e.jsxs(e.Fragment,{children:[e.jsx(ae,{}),e.jsx(De,{onLogin:o,instructors:i})]})},J=({icon:r,label:o,active:i,onClick:b})=>e.jsxs("button",{onClick:b,style:{background:"none",border:"none",display:"flex",flexDirection:"column",alignItems:"center",gap:"4px",color:i?"var(--primary-gold)":"var(--text-secondary)",cursor:"pointer",padding:"12px 20px",minWidth:"64px",touchAction:"manipulation",userSelect:"none",WebkitTapHighlightColor:"transparent",transition:"transform 0.1s, opacity 0.1s"},children:[r,e.jsx("span",{style:{fontSize:"0.75rem"},children:o})]});export{Pe as default};
//# sourceMappingURL=InstructorPage-BNN2uAk7-v7.js.map
