{"version":3,"file":"InstructorPage-BNN2uAk7-v7.js","sources":["../../node_modules/@phosphor-icons/react/dist/defs/Bell.es.js","../../node_modules/@phosphor-icons/react/dist/defs/Phone.es.js","../../node_modules/@phosphor-icons/react/dist/csr/Bell.es.js","../../node_modules/@phosphor-icons/react/dist/csr/Phone.es.js","../../src/components/common/CosmicParticles.jsx","../../src/components/instructor/InstructorLogin.jsx","../../src/components/instructor/InstructorSchedule.jsx","../../src/components/common/SimpleImageModal.jsx","../../src/components/instructor/InstructorNotices.jsx","../../src/components/instructor/InstructorHome.jsx","../../src/pages/InstructorPage.jsx"],"sourcesContent":["import * as a from \"react\";\nconst e = /* @__PURE__ */ new Map([\n  [\n    \"bold\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M225.29,165.93C216.61,151,212,129.57,212,104a84,84,0,0,0-168,0c0,25.58-4.59,47-13.27,61.93A20.08,20.08,0,0,0,30.66,186,19.77,19.77,0,0,0,48,196H84.18a44,44,0,0,0,87.64,0H208a19.77,19.77,0,0,0,17.31-10A20.08,20.08,0,0,0,225.29,165.93ZM128,212a20,20,0,0,1-19.6-16h39.2A20,20,0,0,1,128,212ZM54.66,172C63.51,154,68,131.14,68,104a60,60,0,0,1,120,0c0,27.13,4.48,50,13.33,68Z\" }))\n  ],\n  [\n    \"duotone\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\n      \"path\",\n      {\n        d: \"M208,192H48a8,8,0,0,1-6.88-12C47.71,168.6,56,139.81,56,104a72,72,0,0,1,144,0c0,35.82,8.3,64.6,14.9,76A8,8,0,0,1,208,192Z\",\n        opacity: \"0.2\"\n      }\n    ), /* @__PURE__ */ a.createElement(\"path\", { d: \"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z\" }))\n  ],\n  [\n    \"fill\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216Z\" }))\n  ],\n  [\n    \"light\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M220.07,176.94C214.41,167.2,206,139.73,206,104a78,78,0,1,0-156,0c0,35.74-8.42,63.2-14.08,72.94A14,14,0,0,0,48,198H90.48a38,38,0,0,0,75,0H208a14,14,0,0,0,12.06-21.06ZM128,218a26,26,0,0,1-25.29-20h50.58A26,26,0,0,1,128,218Zm81.71-33a1.9,1.9,0,0,1-1.7,1H48a1.9,1.9,0,0,1-1.7-1,2,2,0,0,1,0-2C53.87,170,62,139.69,62,104a66,66,0,1,1,132,0c0,35.68,8.14,65.95,15.71,79A2,2,0,0,1,209.71,185Z\" }))\n  ],\n  [\n    \"regular\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M221.8,175.94C216.25,166.38,208,139.33,208,104a80,80,0,1,0-160,0c0,35.34-8.26,62.38-13.81,71.94A16,16,0,0,0,48,200H88.81a40,40,0,0,0,78.38,0H208a16,16,0,0,0,13.8-24.06ZM128,216a24,24,0,0,1-22.62-16h45.24A24,24,0,0,1,128,216ZM48,184c7.7-13.24,16-43.92,16-80a64,64,0,1,1,128,0c0,36.05,8.28,66.73,16,80Z\" }))\n  ],\n  [\n    \"thin\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M218.35,178C212.58,168,204,140.13,204,104a76,76,0,1,0-152,0c0,36.13-8.59,64-14.36,73.95A12,12,0,0,0,48,196H92.23a36,36,0,0,0,71.54,0H208A12,12,0,0,0,218.35,178ZM128,220a28,28,0,0,1-27.71-24h55.42A28,28,0,0,1,128,220Zm83.45-34a3.91,3.91,0,0,1-3.44,2H48a3.91,3.91,0,0,1-3.44-2,4,4,0,0,1,0-4C52,169.17,60,139.32,60,104a68,68,0,1,1,136,0c0,35.31,8,65.17,15.44,78A4,4,0,0,1,211.45,186Z\" }))\n  ]\n]);\nexport {\n  e as default\n};\n","import * as a from \"react\";\nconst e = /* @__PURE__ */ new Map([\n  [\n    \"bold\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M224,154.8l-47.09-21.11-.18-.08a19.94,19.94,0,0,0-19,1.75,13.08,13.08,0,0,0-1.12.84l-22.31,19c-13-7.05-26.43-20.37-33.49-33.21l19.06-22.66a11.76,11.76,0,0,0,.85-1.15,20,20,0,0,0,1.66-18.83,1.42,1.42,0,0,1-.08-.18L101.2,32A20.06,20.06,0,0,0,80.42,20.15,60.27,60.27,0,0,0,28,80c0,81.61,66.39,148,148,148a60.27,60.27,0,0,0,59.85-52.42A20.06,20.06,0,0,0,224,154.8ZM176,204A124.15,124.15,0,0,1,52,80,36.29,36.29,0,0,1,80.48,44.46l18.82,42L80.14,109.28a12,12,0,0,0-.86,1.16A20,20,0,0,0,78,130.08c9.42,19.28,28.83,38.56,48.31,48A20,20,0,0,0,146,176.63a11.63,11.63,0,0,0,1.11-.85l22.43-19.07,42,18.81A36.29,36.29,0,0,1,176,204Z\" }))\n  ],\n  [\n    \"duotone\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\n      \"path\",\n      {\n        d: \"M223.94,174.08A48.33,48.33,0,0,1,176,216,136,136,0,0,1,40,80,48.33,48.33,0,0,1,81.92,32.06a8,8,0,0,1,8.3,4.8l21.13,47.2a8,8,0,0,1-.66,7.53L89.32,117a7.93,7.93,0,0,0-.54,7.81c8.27,16.93,25.77,34.22,42.75,42.41a7.92,7.92,0,0,0,7.83-.59l25-21.3a8,8,0,0,1,7.59-.69l47.16,21.13A8,8,0,0,1,223.94,174.08Z\",\n        opacity: \"0.2\"\n      }\n    ), /* @__PURE__ */ a.createElement(\"path\", { d: \"M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0s.08,0,.11,0A40.21,40.21,0,0,1,176,208Z\" }))\n  ],\n  [\n    \"fill\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M231.88,175.08A56.26,56.26,0,0,1,176,224C96.6,224,32,159.4,32,80A56.26,56.26,0,0,1,80.92,24.12a16,16,0,0,1,16.62,9.52l21.12,47.15,0,.12A16,16,0,0,1,117.39,96c-.18.27-.37.52-.57.77L96,121.45c7.49,15.22,23.41,31,38.83,38.51l24.34-20.71a8.12,8.12,0,0,1,.75-.56,16,16,0,0,1,15.17-1.4l.13.06,47.11,21.11A16,16,0,0,1,231.88,175.08Z\" }))\n  ],\n  [\n    \"light\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M221.59,160.3l-47.24-21.17a14,14,0,0,0-13.28,1.22,4.81,4.81,0,0,0-.56.42l-24.69,21a1.88,1.88,0,0,1-1.68.06c-15.87-7.66-32.31-24-40-39.65a1.91,1.91,0,0,1,0-1.68l21.07-25a6.13,6.13,0,0,0,.42-.58,14,14,0,0,0,1.12-13.27L95.73,34.49a14,14,0,0,0-14.56-8.38A54.24,54.24,0,0,0,34,80c0,78.3,63.7,142,142,142a54.25,54.25,0,0,0,53.89-47.17A14,14,0,0,0,221.59,160.3ZM176,210C104.32,210,46,151.68,46,80A42.23,42.23,0,0,1,82.67,38h.23a2,2,0,0,1,1.84,1.31l21.1,47.11a2,2,0,0,1,0,1.67L84.73,113.15a4.73,4.73,0,0,0-.43.57,14,14,0,0,0-.91,13.73c8.87,18.16,27.17,36.32,45.53,45.19a14,14,0,0,0,13.77-1c.19-.13.38-.27.56-.42l24.68-21a1.92,1.92,0,0,1,1.6-.1l47.25,21.17a2,2,0,0,1,1.21,2A42.24,42.24,0,0,1,176,210Z\" }))\n  ],\n  [\n    \"regular\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M222.37,158.46l-47.11-21.11-.13-.06a16,16,0,0,0-15.17,1.4,8.12,8.12,0,0,0-.75.56L134.87,160c-15.42-7.49-31.34-23.29-38.83-38.51l20.78-24.71c.2-.25.39-.5.57-.77a16,16,0,0,0,1.32-15.06l0-.12L97.54,33.64a16,16,0,0,0-16.62-9.52A56.26,56.26,0,0,0,32,80c0,79.4,64.6,144,144,144a56.26,56.26,0,0,0,55.88-48.92A16,16,0,0,0,222.37,158.46ZM176,208A128.14,128.14,0,0,1,48,80,40.2,40.2,0,0,1,82.87,40a.61.61,0,0,0,0,.12l21,47L83.2,111.86a6.13,6.13,0,0,0-.57.77,16,16,0,0,0-1,15.7c9.06,18.53,27.73,37.06,46.46,46.11a16,16,0,0,0,15.75-1.14,8.44,8.44,0,0,0,.74-.56L168.89,152l47,21.05h0s.08,0,.11,0A40.21,40.21,0,0,1,176,208Z\" }))\n  ],\n  [\n    \"thin\",\n    /* @__PURE__ */ a.createElement(a.Fragment, null, /* @__PURE__ */ a.createElement(\"path\", { d: \"M220.78,162.13,173.56,141A12,12,0,0,0,162.18,142a3.37,3.37,0,0,0-.38.28L137,163.42a3.93,3.93,0,0,1-3.7.21c-16.24-7.84-33.05-24.52-40.89-40.57a3.9,3.9,0,0,1,.18-3.69l21.2-25.21c.1-.12.19-.25.28-.38a12,12,0,0,0,1-11.36L93.9,35.28a12,12,0,0,0-12.48-7.19A52.25,52.25,0,0,0,36,80c0,77.2,62.8,140,140,140a52.25,52.25,0,0,0,51.91-45.42A12,12,0,0,0,220.78,162.13ZM220,173.58A44.23,44.23,0,0,1,176,212C103.22,212,44,152.78,44,80A44.23,44.23,0,0,1,82.42,36a3.87,3.87,0,0,1,.48,0,4,4,0,0,1,3.67,2.49l21.11,47.14a4,4,0,0,1-.23,3.6l-21.19,25.2c-.1.13-.2.25-.29.39a12,12,0,0,0-.78,11.75c8.69,17.79,26.61,35.58,44.6,44.27a12,12,0,0,0,11.79-.87l.37-.28,24.83-21.12a3.93,3.93,0,0,1,3.57-.27l47.21,21.16A4,4,0,0,1,220,173.58Z\" }))\n  ]\n]);\nexport {\n  e as default\n};\n","import * as e from \"react\";\nimport a from \"../lib/IconBase.es.js\";\nimport l from \"../defs/Bell.es.js\";\nconst o = e.forwardRef((r, t) => /* @__PURE__ */ e.createElement(a, { ref: t, ...r, weights: l }));\no.displayName = \"BellIcon\";\nconst s = o;\nexport {\n  s as Bell,\n  o as BellIcon\n};\n","import * as o from \"react\";\nimport n from \"../lib/IconBase.es.js\";\nimport a from \"../defs/Phone.es.js\";\nconst e = o.forwardRef((r, t) => /* @__PURE__ */ o.createElement(n, { ref: t, ...r, weights: a }));\ne.displayName = \"PhoneIcon\";\nconst s = e;\nexport {\n  s as Phone,\n  e as PhoneIcon\n};\n","import { useEffect, useRef } from 'react';\r\n\r\nconst CosmicParticles = () => {\r\n    const canvasRef = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) return;\r\n        \r\n        const ctx = canvas.getContext('2d');\r\n        let animationId;\r\n        let particles = [];\r\n\r\n        const resize = () => {\r\n            canvas.width = window.innerWidth;\r\n            canvas.height = window.innerHeight;\r\n        };\r\n        resize();\r\n        window.addEventListener('resize', resize);\r\n\r\n        // Create particles\r\n        const createParticles = () => {\r\n            particles = [];\r\n            const count = Math.floor((canvas.width * canvas.height) / 8000);\r\n            \r\n            for (let i = 0; i < count; i++) {\r\n                particles.push({\r\n                    x: Math.random() * canvas.width,\r\n                    y: Math.random() * canvas.height,\r\n                    size: Math.random() * 2 + 0.5,\r\n                    speedX: (Math.random() - 0.5) * 0.3,\r\n                    speedY: (Math.random() - 0.5) * 0.3,\r\n                    opacity: Math.random() * 0.8 + 0.2,\r\n                    twinkle: Math.random() * 0.02,\r\n                    twinkleDir: 1,\r\n                    hue: Math.random() > 0.8 ? (Math.random() * 60 + 30) : 0, // Some gold particles\r\n                    isGold: Math.random() > 0.85\r\n                });\r\n            }\r\n        };\r\n        createParticles();\r\n\r\n        // Animation loop\r\n        const animate = () => {\r\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n            particles.forEach(p => {\r\n                // Update position\r\n                p.x += p.speedX;\r\n                p.y += p.speedY;\r\n\r\n                // Wrap around edges\r\n                if (p.x < 0) p.x = canvas.width;\r\n                if (p.x > canvas.width) p.x = 0;\r\n                if (p.y < 0) p.y = canvas.height;\r\n                if (p.y > canvas.height) p.y = 0;\r\n\r\n                // Twinkle effect\r\n                p.opacity += p.twinkle * p.twinkleDir;\r\n                if (p.opacity > 1) { p.opacity = 1; p.twinkleDir = -1; }\r\n                if (p.opacity < 0.1) { p.opacity = 0.1; p.twinkleDir = 1; }\r\n\r\n                // Draw particle\r\n                ctx.beginPath();\r\n                ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\r\n                \r\n                if (p.isGold) {\r\n                    // Gold particles\r\n                    ctx.fillStyle = `rgba(212, 175, 55, ${p.opacity})`;\r\n                    ctx.shadowColor = '#D4AF37';\r\n                    ctx.shadowBlur = 8;\r\n                } else {\r\n                    // White/blue stars\r\n                    const blue = Math.random() > 0.5 ? 255 : 200;\r\n                    ctx.fillStyle = `rgba(255, 255, ${blue}, ${p.opacity * 0.7})`;\r\n                    ctx.shadowColor = 'rgba(255, 255, 255, 0.5)';\r\n                    ctx.shadowBlur = 4;\r\n                }\r\n                \r\n                ctx.fill();\r\n                ctx.shadowBlur = 0;\r\n            });\r\n\r\n            // Draw occasional shooting star\r\n            if (Math.random() > 0.995) {\r\n                const startX = Math.random() * canvas.width;\r\n                const startY = Math.random() * canvas.height * 0.5;\r\n                const gradient = ctx.createLinearGradient(startX, startY, startX + 100, startY + 60);\r\n                gradient.addColorStop(0, 'rgba(212, 175, 55, 0.8)');\r\n                gradient.addColorStop(1, 'rgba(212, 175, 55, 0)');\r\n                \r\n                ctx.beginPath();\r\n                ctx.moveTo(startX, startY);\r\n                ctx.lineTo(startX + 100, startY + 60);\r\n                ctx.strokeStyle = gradient;\r\n                ctx.lineWidth = 2;\r\n                ctx.stroke();\r\n            }\r\n\r\n            animationId = requestAnimationFrame(animate);\r\n        };\r\n        animate();\r\n\r\n        return () => {\r\n            window.removeEventListener('resize', resize);\r\n            cancelAnimationFrame(animationId);\r\n        };\r\n    }, []);\r\n\r\n    return (\r\n        <canvas\r\n            ref={canvasRef}\r\n            style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                width: '100%',\r\n                height: '100%',\r\n                zIndex: 0,\r\n                pointerEvents: 'none',\r\n                background: 'linear-gradient(180deg, #0a0a0f 0%, #0d0d15 50%, #0a0a0f 100%)'\r\n            }}\r\n        />\r\n    );\r\n};\r\n\r\nexport default CosmicParticles;\r\n","import { useState } from 'react';\r\nimport { User, Phone } from '@phosphor-icons/react';\r\nimport { storageService } from '../../services/storage';\r\n\r\nconst InstructorLogin = ({ onLogin, instructors }) => {\r\n    const [name, setName] = useState('');\r\n    const [phoneLast4, setPhoneLast4] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleLogin = async () => {\r\n        setLoading(true);\r\n        setError('');\r\n        try {\r\n            // ë””ë²„ê¹… ë¡œê·¸\r\n            console.log('ğŸ” [ê°•ì‚¬ ë¡œê·¸ì¸ ì‹œë„]');\r\n            console.log('  - ì„ íƒí•œ ì´ë¦„:', name);\r\n            console.log('  - ì…ë ¥í•œ ë²ˆí˜¸:', phoneLast4);\r\n            console.log('  - trim í›„ ì´ë¦„:', name.trim());\r\n            console.log('  - trim í›„ ë²ˆí˜¸:', phoneLast4.trim());\r\n            \r\n            const result = await storageService.loginInstructor(name.trim(), phoneLast4.trim());\r\n            \r\n            console.log('  - ê²°ê³¼:', result);\r\n            \r\n            if (result.success) {\r\n                onLogin(result.name);\r\n            } else {\r\n                setError(result.message || 'ì´ë¦„ ë˜ëŠ” ì „í™”ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');\r\n            }\r\n        } catch (e) {\r\n            console.error('  - ì—ëŸ¬:', e);\r\n            setError('ì¸ì¦ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', display: 'flex', alignItems: 'center', justifyContent: 'center', padding: '20px', position: 'relative', zIndex: 1 }}>\r\n            <div style={{ background: 'rgba(20, 20, 25, 0.95)', padding: '40px', borderRadius: '20px', maxWidth: '400px', width: '100%', textAlign: 'center', border: '1px solid rgba(212, 175, 55, 0.2)' }}>\r\n                {/* Logo */}\r\n                <img \r\n                    src=\"/logo_circle.png\" \r\n                    alt=\"ë³µìƒ˜ìš”ê°€\" \r\n                    style={{ width: '70px', height: '70px', marginBottom: '16px', filter: 'drop-shadow(0 0 10px rgba(212, 175, 55, 0.5))' }} \r\n                />\r\n                <h1 style={{ color: 'var(--primary-gold)', marginBottom: '8px', fontSize: '1.8rem' }}>ë³µìƒ˜ìš”ê°€ ì„ ìƒë‹˜</h1>\r\n                <div style={{ color: 'var(--text-secondary)', marginBottom: '30px' }}>ì„ ìƒë‹˜ ì „ìš© ì•±ì…ë‹ˆë‹¤</div>\r\n\r\n                <div style={{ marginBottom: '16px' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', background: 'var(--bg-input)', padding: '12px 16px', borderRadius: '10px', marginBottom: '12px' }}>\r\n                        <User size={20} color=\"var(--text-secondary)\" />\r\n                        <select\r\n                            value={name}\r\n                            onChange={(e) => setName(e.target.value)}\r\n                            style={{ flex: 1, background: 'transparent', border: 'none', color: 'var(--text-primary)', fontSize: '1rem', outline: 'none' }}\r\n                        >\r\n                            <option value=\"\">ì„ ìƒë‹˜ ì„ íƒ</option>\r\n                            {instructors.map(inst => {\r\n                                const instName = typeof inst === 'string' ? inst : inst.name;\r\n                                return <option key={instName} value={instName}>{instName}</option>;\r\n                            })}\r\n                        </select>\r\n                    </div>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px', background: 'var(--bg-input)', padding: '12px 16px', borderRadius: '10px' }}>\r\n                        <Phone size={20} color=\"var(--text-secondary)\" />\r\n                        <input\r\n                            type=\"tel\"\r\n                            value={phoneLast4}\r\n                            onChange={(e) => {\r\n                                const value = e.target.value.replace(/[^0-9]/g, ''); // ìˆ«ìë§Œ í—ˆìš©\r\n                                setPhoneLast4(value.slice(0, 4));\r\n                            }}\r\n                            placeholder=\"ì „í™”ë²ˆí˜¸ ë’¤ 4ìë¦¬\"\r\n                            maxLength={4}\r\n                            inputMode=\"numeric\"\r\n                            pattern=\"[0-9]*\"\r\n                            style={{ flex: 1, background: 'transparent', border: 'none', color: 'var(--text-primary)', fontSize: '1rem', outline: 'none' }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {error && <p style={{ color: '#ff4757', marginBottom: '16px', fontSize: '0.9rem' }}>{error}</p>}\r\n\r\n                <button\r\n                    onClick={handleLogin}\r\n                    disabled={!name || phoneLast4.length !== 4 || loading}\r\n                    style={{\r\n                        width: '100%', padding: '14px', borderRadius: '10px', border: 'none',\r\n                        background: (name && phoneLast4.length === 4 && !loading) ? 'var(--primary-gold)' : 'var(--bg-input)',\r\n                        color: (name && phoneLast4.length === 4 && !loading) ? 'black' : 'var(--text-secondary)',\r\n                        fontWeight: 'bold', fontSize: '1rem', cursor: 'pointer'\r\n                    }}\r\n                >\r\n                    {loading ? 'ë¡œê·¸ì¸ ì¤‘...' : 'ë¡œê·¸ì¸'}\r\n                </button>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InstructorLogin;\r\n","import { useState, useEffect, useMemo } from 'react';\r\nimport { storageService } from '../../services/storage';\r\nimport { getMonthlyClasses } from '../../services/scheduleService';\r\nimport { isHoliday, getHolidayName } from '../../utils/holidays';\r\n\r\nconst navBtnStyle = {\r\n    background: 'var(--bg-input)', border: 'none', color: 'var(--text-primary)', width: '36px', height: '36px',\r\n    borderRadius: '50%', cursor: 'pointer', fontSize: '1rem'\r\n};\r\n\r\nconst InstructorSchedule = ({ instructorName }) => {\r\n    const [currentDate, setCurrentDate] = useState(new Date());\r\n    const [monthlyData, setMonthlyData] = useState({});\r\n    const [selectedDate, setSelectedDate] = useState(null);\r\n    const [dateAttendance, setDateAttendance] = useState([]);\r\n    const [expandedClassKey, setExpandedClassKey] = useState(null); // time_title\r\n    const [loadingAttendance, setLoadingAttendance] = useState(false);\r\n\r\n    const year = currentDate.getFullYear();\r\n    const month = currentDate.getMonth() + 1;\r\n\r\n    // Defined branches to fetch\r\n    const branches = useMemo(() => [\r\n        { id: 'gwangheungchang', name: 'ê´‘í¥ì°½ì ', color: 'var(--primary-gold)' },\r\n        { id: 'mapo', name: 'ë§ˆí¬ì ', color: '#3B82F6' } // [FIX] Updated to Blue to match studioConfig\r\n    ], []);\r\n\r\n    useEffect(() => {\r\n        const loadData = async () => {\r\n            const promises = branches.map(b => getMonthlyClasses(b.id, year, month));\r\n            const results = await Promise.all(promises);\r\n            \r\n            const merged = {};\r\n            \r\n            results.forEach((data, idx) => {\r\n                const branch = branches[idx];\r\n                Object.entries(data).forEach(([date, classes]) => {\r\n                    if (!merged[date]) merged[date] = [];\r\n                    // Add branch info to each class\r\n                    const classesWithBranch = classes.map(cls => ({\r\n                        ...cls,\r\n                        branchName: branch.name,\r\n                        branchColor: branch.color\r\n                    }));\r\n                    merged[date] = [...merged[date], ...classesWithBranch];\r\n                });\r\n            });\r\n            \r\n            setMonthlyData(merged);\r\n        };\r\n        loadData();\r\n    }, [year, month, branches]);\r\n\r\n    // Load Attendance for selected date\r\n    useEffect(() => {\r\n        if (!selectedDate) return;\r\n        \r\n        const loadDateAttendance = async () => {\r\n            setLoadingAttendance(true);\r\n            try {\r\n                const promises = branches.map(b => storageService.getAttendanceByDate(selectedDate, b.id));\r\n                const results = await Promise.all(promises);\r\n                let all = [];\r\n                results.forEach(data => {\r\n                    all = [...all, ...(data || [])];\r\n                });\r\n                setDateAttendance(all);\r\n            } catch (e) {\r\n                console.error('Failed to load date attendance:', e);\r\n            } finally {\r\n                setLoadingAttendance(false);\r\n            }\r\n        };\r\n        loadDateAttendance();\r\n        setExpandedClassKey(null); // Reset expansion on date change\r\n    }, [selectedDate, branches]);\r\n\r\n    const daysInMonth = new Date(year, month, 0).getDate();\r\n    const firstDay = new Date(year, month - 1, 1).getDay();\r\n    const dayNames = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];\r\n\r\n    const getBranchStatus = (dateStr) => {\r\n        const classes = monthlyData[dateStr] || [];\r\n        const myClasses = classes.filter(cls => \r\n            cls.instructor === instructorName && \r\n            cls.status !== 'cancelled' // Exclude cancelled classes from visual indicators\r\n        );\r\n        return {\r\n            hasGhc: myClasses.some(cls => cls.branchName === 'ê´‘í¥ì°½ì ' || cls.branchId === 'gwangheungchang'),\r\n            hasMapo: myClasses.some(cls => cls.branchName === 'ë§ˆí¬ì ' || cls.branchId === 'mapo'),\r\n            hasAny: myClasses.length > 0\r\n        };\r\n    };\r\n\r\n    const renderCalendar = () => {\r\n        const cells = [];\r\n        for (let i = 0; i < firstDay; i++) {\r\n            cells.push(<div key={`empty-${i}`} style={{ padding: '8px' }}></div>);\r\n        }\r\n        for (let d = 1; d <= daysInMonth; d++) {\r\n            const dateStr = `${year}-${String(month).padStart(2, '0')}-${String(d).padStart(2, '0')}`;\r\n            const { hasGhc, hasMapo } = getBranchStatus(dateStr);\r\n            const isSelected = selectedDate === dateStr;\r\n            const isToday = dateStr === new Date().toLocaleDateString('sv-SE', { timeZone: 'Asia/Seoul' });\r\n            \r\n            // Calculate day of week (0: Sun, 6: Sat)\r\n            const dayOfWeek = new Date(year, month - 1, d).getDay();\r\n            const isRedDay = dayOfWeek === 0 || isHoliday(dateStr);\r\n            const isBlueDay = dayOfWeek === 6 && !isRedDay; // Holiday takes precedence over Saturday\r\n            \r\n            const holidayName = getHolidayName(dateStr);\r\n\r\n            let borderStyle = 'none';\r\n            let borderColor = undefined;\r\n\r\n            if (hasGhc && hasMapo) {\r\n                borderStyle = '2px solid';\r\n                borderColor = 'var(--primary-gold) #3B82F6 #3B82F6 var(--primary-gold)'; // Top-Left Gold, Bottom-Right Blue\r\n            } else if (hasGhc) {\r\n                borderStyle = '2px solid var(--primary-gold)';\r\n            } else if (hasMapo) {\r\n                borderStyle = '2px solid #3B82F6';\r\n            }\r\n            \r\n            // [DEBUG] Log if border is applied unexpectedly\r\n            if ((hasGhc || hasMapo) && !monthlyData[dateStr]?.length) {\r\n                 console.warn(`[Calendar] Border applied but no classes found for ${dateStr}? GHC:${hasGhc}, MAPO:${hasMapo}`);\r\n            }\r\n\r\n            // Text Color Logic\r\n            let textColor = 'var(--text-primary)';\r\n            if (isSelected) {\r\n                textColor = 'black';\r\n            } else if (isRedDay) {\r\n                textColor = '#ff4757';\r\n            } else if (isBlueDay) {\r\n                textColor = '#4a90e2';\r\n            }\r\n\r\n            // Holiday Name Mapping\r\n            const holidayMap = {\r\n                'holiday_new_year': 'ì‹ ì •',\r\n                'holiday_lunar_new_year': 'ì„¤ë‚ ',\r\n                'holiday_samiljeol': 'ì‚¼ì¼ì ˆ',\r\n                'holiday_childrens_day': 'ì–´ë¦°ì´ë‚ ',\r\n                'holiday_buddha': 'ì„ê°€íƒ„ì‹ ì¼',\r\n                'holiday_memorial': 'í˜„ì¶©ì¼',\r\n                'holiday_liberation': 'ê´‘ë³µì ˆ',\r\n                'holiday_chuseok': 'ì¶”ì„',\r\n                'holiday_foundation': 'ê°œì²œì ˆ',\r\n                'holiday_hangul': 'í•œê¸€ë‚ ',\r\n                'holiday_christmas': 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤',\r\n                'holiday_election': 'ì„ ê±°ì¼',\r\n                'holiday_arbor_day': 'ì‹ëª©ì¼'\r\n            };\r\n\r\n            cells.push(\r\n                <div\r\n                    key={d}\r\n                    onClick={() => setSelectedDate(dateStr)}\r\n                    style={{\r\n                        padding: '4px', textAlign: 'center', cursor: 'pointer', borderRadius: '8px',\r\n                        background: isSelected ? 'var(--primary-gold)' : isToday ? 'rgba(212, 175, 55, 0.15)' : 'transparent',\r\n                        color: textColor,\r\n                        border: borderStyle,\r\n                        borderColor: borderColor !== 'transparent' ? borderColor : undefined,\r\n                        fontWeight: (hasGhc || hasMapo) ? 'bold' : 'normal',\r\n                        transition: 'all 0.2s',\r\n                        position: 'relative',\r\n                        display: 'flex',\r\n                        flexDirection: 'column',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        minHeight: '52px' // Increased slightly to fit holiday name\r\n                    }}\r\n                >\r\n                    <span style={{ position: 'relative', zIndex: 1, fontSize: '1rem' }}>{d}</span>\r\n                    {holidayName && (\r\n                        <span style={{ \r\n                            fontSize: '0.6rem', \r\n                            marginTop: '2px', \r\n                            color: isSelected ? 'black' : '#ff4757',\r\n                            whiteSpace: 'nowrap',\r\n                            overflow: 'hidden',\r\n                            maxWidth: '100%',\r\n                            textOverflow: 'ellipsis'\r\n                        }}>\r\n                            {holidayMap[holidayName] || holidayName}\r\n                        </span>\r\n                    )}\r\n                </div>\r\n            );\r\n        }\r\n        return cells;\r\n    };\r\n\r\n    const selectedClasses = selectedDate ? (monthlyData[selectedDate] || []) : [];\r\n    selectedClasses.sort((a, b) => a.time.localeCompare(b.time));\r\n\r\n    return (\r\n        <div style={{ padding: '16px' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\r\n                <button onClick={() => setCurrentDate(new Date(year, month - 2, 1))} style={navBtnStyle}>â—€</button>\r\n                <h2 style={{ margin: 0, fontSize: '1.2rem' }}>{year}ë…„ {month}ì›”</h2>\r\n                <button onClick={() => setCurrentDate(new Date(year, month, 1))} style={navBtnStyle}>â–¶</button>\r\n            </div>\r\n\r\n            {/* ğŸ—“ï¸ Guide Text */}\r\n            <div style={{ textAlign: 'center', marginBottom: '16px', fontSize: '0.85rem', color: 'var(--text-secondary)', animation: 'fadeIn 1s ease' }}>\r\n                ğŸ‘‡ ë‚ ì§œë¥¼ í„°ì¹˜í•˜ë©´ ìƒì„¸ ì‹œê°„í‘œë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”\r\n            </div>\r\n\r\n            {/* Branch Legend */}\r\n            <div style={{ \r\n                marginBottom: '20px', \r\n                background: 'rgba(255, 255, 255, 0.05)',\r\n                padding: '16px',\r\n                borderRadius: '12px',\r\n                border: '1px solid rgba(255, 255, 255, 0.1)'\r\n            }}>\r\n                <div style={{ fontSize: '0.9rem', color: 'var(--text-secondary)', marginBottom: '10px', textAlign: 'center' }}>\r\n                    ğŸ“… ì§€ì ë³„ ì¼ì • í™•ì¸\r\n                </div>\r\n                <div style={{ display: 'flex', justifyContent: 'center', gap: '24px' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                        <div style={{ \r\n                            width: '24px', \r\n                            height: '24px', \r\n                            borderRadius: '6px', \r\n                            background: 'transparent',\r\n                            border: '3px solid var(--primary-gold)',\r\n                            boxShadow: '0 0 10px rgba(212, 175, 55, 0.2)'\r\n                        }} />\r\n                        <span style={{ color: 'white', fontSize: '1rem', fontWeight: 'bold' }}>ê´‘í¥ì°½ì </span>\r\n                    </div>\r\n                    <div style={{ width: '1px', background: 'rgba(255, 255, 255, 0.2)' }} />\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '10px' }}>\r\n                        <div style={{ \r\n                            width: '24px', \r\n                            height: '24px', \r\n                            borderRadius: '6px', \r\n                            background: 'transparent',\r\n                            border: '3px solid #3B82F6',\r\n                            boxShadow: '0 0 10px rgba(59, 130, 246, 0.2)'\r\n                        }} />\r\n                        <span style={{ color: 'white', fontSize: '1rem', fontWeight: 'bold' }}>ë§ˆí¬ì </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '4px', marginBottom: '8px' }}>\r\n                {dayNames.map(day => (\r\n                    <div key={day} style={{ textAlign: 'center', fontSize: '0.85rem', color: 'var(--text-secondary)', padding: '8px' }}>{day}</div>\r\n                ))}\r\n            </div>\r\n\r\n            <div style={{ display: 'grid', gridTemplateColumns: 'repeat(7, 1fr)', gap: '4px', marginBottom: '20px' }}>\r\n                {renderCalendar()}\r\n            </div>\r\n\r\n            {selectedDate && (\r\n                <div style={{ background: 'var(--bg-surface)', padding: '16px', borderRadius: '12px' }}>\r\n                    <h3 style={{ marginBottom: '12px', fontSize: '1rem' }}>{selectedDate} ìˆ˜ì—…</h3>\r\n                    {selectedClasses.length === 0 ? (\r\n                        <p style={{ color: 'var(--text-secondary)' }}>ìˆ˜ì—…ì´ ì—†ìŠµë‹ˆë‹¤</p>\r\n                    ) : (\r\n                        <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                            {selectedClasses.map((cls, idx) => {\r\n                                const isCancelled = cls.status === 'cancelled';\r\n                                return (\r\n                                    <div\r\n                                        key={idx}\r\n                                        onClick={() => {\r\n                                            if (!isCancelled && cls.instructor === instructorName) {\r\n                                                const key = `${cls.time}_${cls.title}`;\r\n                                                setExpandedClassKey(expandedClassKey === key ? null : key);\r\n                                            }\r\n                                        }}\r\n                                        style={{\r\n                                            padding: '12px', borderRadius: '8px',\r\n                                            background: isCancelled ? 'rgba(255, 71, 87, 0.1)' : cls.instructor === instructorName ? 'rgba(212, 175, 55, 0.1)' : 'var(--bg-input)',\r\n                                            borderLeft: `4px solid ${isCancelled ? '#ff4757' : (cls.branchColor || 'var(--primary-gold)')}`,\r\n                                            position: 'relative',\r\n                                            opacity: isCancelled ? 0.7 : 1,\r\n                                            cursor: (!isCancelled && cls.instructor === instructorName) ? 'pointer' : 'default',\r\n                                            border: (expandedClassKey === `${cls.time}_${cls.title}`) ? `1px solid ${cls.branchColor}` : 'none'\r\n                                        }}\r\n                                    >\r\n                                        <div style={{ position: 'absolute', top: '12px', right: '12px', display: 'flex', gap: '6px' }}>\r\n                                            {isCancelled && (\r\n                                                <div style={{ \r\n                                                    fontSize: '0.75rem', \r\n                                                    color: '#ff4757', \r\n                                                    fontWeight: 'bold', \r\n                                                    border: '1px solid #ff4757', \r\n                                                    padding: '2px 6px', \r\n                                                    borderRadius: '4px',\r\n                                                    background: 'rgba(255, 71, 87, 0.1)' \r\n                                                }}>\r\n                                                    íœ´ê°•\r\n                                                </div>\r\n                                            )}\r\n                                            <div style={{ \r\n                                                fontSize: '0.75rem', \r\n                                                color: cls.branchColor, \r\n                                                fontWeight: 'bold', \r\n                                                border: `1px solid ${cls.branchColor}`, \r\n                                                padding: '2px 6px', \r\n                                                borderRadius: '4px' \r\n                                            }}>\r\n                                                {cls.branchName}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '4px' }}>\r\n                                            <span style={{ fontWeight: 'bold', fontSize: '1.1rem', textDecoration: isCancelled ? 'line-through' : 'none' }}>{cls.time}</span>\r\n                                            {cls.instructor === instructorName && !isCancelled && <span style={{ fontSize: '0.75rem', background: 'var(--primary-gold)', color: 'black', padding: '2px 6px', borderRadius: '4px', fontWeight: 'bold' }}>ë‚´ ìˆ˜ì—…</span>}\r\n                                        </div>\r\n                                        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                                            <div style={{ fontSize: '0.95rem', textDecoration: isCancelled ? 'line-through' : 'none', color: isCancelled ? 'var(--text-secondary)' : 'var(--text-primary)' }}>{cls.title}</div>\r\n                                            <span style={{ fontSize: '0.85rem', color: 'var(--text-secondary)', marginRight: isCancelled ? '0' : '60px' }}>{cls.instructor}</span>\r\n                                        </div>\r\n\r\n                                        {/* Attendee List Expansion */}\r\n                                        {expandedClassKey === `${cls.time}_${cls.title}` && (\r\n                                            <div style={{ marginTop: '12px', paddingTop: '12px', borderTop: '1px solid rgba(255,255,255,0.1)' }}>\r\n                                                <div style={{ fontSize: '0.8rem', color: 'var(--primary-gold)', marginBottom: '8px', fontWeight: 'bold' }}>ğŸ‘¥ ì¶œì„ ëª…ë‹¨</div>\r\n                                                {loadingAttendance ? (\r\n                                                    <div style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>ì¡°íšŒ ì¤‘...</div>\r\n                                                ) : (\r\n                                                    <div style={{ display: 'flex', flexDirection: 'column', gap: '4px' }}>\r\n                                                        {dateAttendance\r\n                                                            .filter(a => a.className === cls.title && (a.instructor === cls.instructor || a.instructor === 'ë¯¸ì§€ì •'))\r\n                                                            .length === 0 ? (\r\n                                                            <div style={{ fontSize: '0.8rem', color: 'var(--text-secondary)', fontStyle: 'italic' }}>ì¶œì„ íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤</div>\r\n                                                        ) : (\r\n                                                            dateAttendance\r\n                                                                .filter(a => a.className === cls.title && (a.instructor === cls.instructor || a.instructor === 'ë¯¸ì§€ì •'))\r\n                                                                .map((att, aidx) => (\r\n                                                                    <div key={att.id || aidx} style={{ display: 'flex', justifyContent: 'space-between', background: 'rgba(255,255,255,0.05)', padding: '6px 10px', borderRadius: '4px' }}>\r\n                                                                        <span style={{ fontSize: '0.85rem' }}>{att.memberName}</span>\r\n                                                                        <span style={{ fontSize: '0.8rem', color: 'var(--primary-gold)' }}>\r\n                                                                            {att.timestamp ? new Date(att.timestamp).toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', hour12: false }) : ''}\r\n                                                                        </span>\r\n                                                                    </div>\r\n                                                                ))\r\n                                                        )}\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                        )}\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InstructorSchedule;\r\n","import React from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { X } from '@phosphor-icons/react';\r\n\r\nconst SimpleImageModal = ({ isOpen, onClose, imageSrc }) => {\r\n    if (!isOpen || !imageSrc) return null;\r\n\r\n    return createPortal(\r\n        <div \r\n            style={{\r\n                position: 'fixed',\r\n                top: 0,\r\n                left: 0,\r\n                right: 0,\r\n                bottom: 0,\r\n                backgroundColor: 'black', // ì™„ì „ ë¶ˆíˆ¬ëª…\r\n                zIndex: 9999, // ìµœìƒìœ„\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                padding: '20px',\r\n                backdropFilter: 'none' // ì„±ëŠ¥ ìµœì í™” ë° ë’¤ìª½ ìš”ì†Œ ê°„ì„­ ì œê±°\r\n            }}\r\n            onClick={onClose}\r\n        >\r\n            <button \r\n                onClick={onClose}\r\n                style={{\r\n                    position: 'absolute',\r\n                    top: '20px',\r\n                    right: '20px',\r\n                    background: 'rgba(255, 255, 255, 0.15)',\r\n                    border: 'none',\r\n                    borderRadius: '50%',\r\n                    width: '44px',\r\n                    height: '44px',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    cursor: 'pointer',\r\n                    color: 'white',\r\n                    zIndex: 10000,\r\n                    backdropFilter: 'blur(4px)'\r\n                }}\r\n            >\r\n                <X size={28} />\r\n            </button>\r\n            \r\n            <img \r\n                src={imageSrc} \r\n                alt=\"Enlarged view\" \r\n                style={{\r\n                    maxWidth: '100%',\r\n                    maxHeight: '90vh',\r\n                    objectFit: 'contain',\r\n                    borderRadius: '4px',\r\n                    boxShadow: '0 4px 30px rgba(0,0,0,0.5)'\r\n                }}\r\n                onClick={(e) => e.stopPropagation()} \r\n            />\r\n        </div>,\r\n        document.body\r\n    );\r\n};\r\n\r\nexport default SimpleImageModal;\r\n","import { useState, useEffect } from 'react';\r\nimport { storageService } from '../../services/storage';\r\nimport SimpleImageModal from '../common/SimpleImageModal';\r\n\r\nconst InstructorNotices = () => {\r\n    const [notices, setNotices] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [selectedImage, setSelectedImage] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const loadNotices = async () => {\r\n            try {\r\n                const data = await storageService.loadNotices();\r\n                setNotices(data || []);\r\n            } catch (e) {\r\n                console.error('Failed to load notices:', e);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadNotices();\r\n\r\n        const unsubscribe = storageService.subscribe(() => {\r\n            setNotices(storageService.getNotices() || []);\r\n        });\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    if (loading) return <div style={{ padding: '20px', textAlign: 'center', color: 'var(--text-secondary)' }}>ë¡œë”© ì¤‘...</div>;\r\n\r\n    return (\r\n        <div style={{ padding: '16px' }}>\r\n            <h2 style={{ fontSize: '1.2rem', marginBottom: '16px' }}>ê³µì§€</h2>\r\n            {notices.length === 0 ? (\r\n                <p style={{ color: 'var(--text-secondary)' }}>ê³µì§€ì‚¬í•­ì´ ì—†ìŠµë‹ˆë‹¤</p>\r\n            ) : (\r\n                <div style={{ display: 'flex', flexDirection: 'column', gap: '12px' }}>\r\n                    {notices.map((notice, idx) => (\r\n                        <div key={notice.id || idx} style={{ background: 'var(--bg-surface)', padding: '16px', borderRadius: '12px' }}>\r\n                            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '8px' }}>\r\n                                <h3 style={{ margin: 0, fontSize: '1rem' }}>{notice.title}</h3>\r\n                                <span style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>{notice.createdAt ? new Date(notice.createdAt).toLocaleDateString('sv-SE', { timeZone: 'Asia/Seoul' }) : ''}</span>\r\n                            </div>\r\n                            {((notice.images && notice.images.length > 0) || notice.image || notice.imageUrl) && (\r\n                                <div style={{\r\n                                    display: 'flex',\r\n                                    gap: '10px',\r\n                                    overflowX: 'auto',\r\n                                    paddingBottom: '10px',\r\n                                    marginBottom: '12px',\r\n                                    scrollSnapType: 'x mandatory',\r\n                                    WebkitOverflowScrolling: 'touch'\r\n                                }}>\r\n                                    {notice.images && notice.images.length > 0 ? (\r\n                                        notice.images.map((img, idx) => (\r\n                                            <img \r\n                                                key={idx} \r\n                                                src={img} \r\n                                                alt={notice.title} \r\n                                                style={{ \r\n                                                    minWidth: '280px', \r\n                                                    maxWidth: '100%',\r\n                                                    height: 'auto', \r\n                                                    maxHeight: '300px',\r\n                                                    objectFit: 'cover', \r\n                                                    borderRadius: '8px', \r\n                                                    scrollSnapAlign: 'start',\r\n                                                    cursor: 'pointer'\r\n                                                }}\r\n                                                onClick={() => setSelectedImage(img)}\r\n                                            />\r\n                                        ))\r\n                                    ) : (\r\n                                        <img \r\n                                            src={notice.image || notice.imageUrl} \r\n                                            alt={notice.title} \r\n                                            style={{ width: '100%', borderRadius: '8px', cursor: 'pointer' }}\r\n\r\n                                            onClick={() => setSelectedImage(notice.image || notice.imageUrl)}\r\n                                        />\r\n                                    )}\r\n                                </div>\r\n                            )}\r\n                            <p style={{ margin: 0, fontSize: '0.9rem', color: 'var(--text-secondary)', whiteSpace: 'pre-wrap' }}>{notice.content}</p>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {/* Image Modal for Notices */}\r\n            <SimpleImageModal \r\n                isOpen={!!selectedImage} \r\n                imageSrc={selectedImage} \r\n                onClose={() => setSelectedImage(null)} \r\n            />\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InstructorNotices;\r\n","import { useState, useEffect } from 'react';\r\nimport { Bell, BellRinging, Share, SignOut, PlusSquare } from '@phosphor-icons/react';\r\nimport { getToken } from 'firebase/messaging';\r\nimport { messaging } from '../../firebase';\r\nimport { storageService } from '../../services/storage';\r\nimport { getKSTTotalMinutes } from '../../utils/dates';\r\n\r\nconst InstructorHome = ({ instructorName, attendance, attendanceLoading, instructorClasses = [] }) => {\r\n    const [pushEnabled, setPushEnabled] = useState(false);\r\n    const [pushLoading, setPushLoading] = useState(false);\r\n    const [pushMessage, setPushMessage] = useState('');\r\n    const [deferredPrompt, setDeferredPrompt] = useState(null);\r\n    const [isStandalone, setIsStandalone] = useState(false);\r\n    const [deviceOS, setDeviceOS] = useState('unknown');\r\n    \r\n    const todayStr = new Date().toLocaleDateString('sv-SE', { timeZone: 'Asia/Seoul' });\r\n\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined' && 'Notification' in window) {\r\n            setPushEnabled(window.Notification.permission === 'granted');\r\n        }\r\n\r\n        const ua = navigator.userAgent.toLowerCase();\r\n        if (/iphone|ipad|ipod/.test(ua)) {\r\n            setDeviceOS('ios');\r\n        } else if (/android/.test(ua)) {\r\n            setDeviceOS('android');\r\n        }\r\n\r\n        const isInstalled = window.matchMedia('(display-mode: standalone)').matches || \r\n                           window.navigator.standalone === true;\r\n        setIsStandalone(isInstalled);\r\n\r\n        const handleBeforeInstall = (e) => {\r\n            e.preventDefault();\r\n            setDeferredPrompt(e);\r\n        };\r\n        window.addEventListener('beforeinstallprompt', handleBeforeInstall);\r\n\r\n        return () => {\r\n            window.removeEventListener('beforeinstallprompt', handleBeforeInstall);\r\n        };\r\n    }, []);\r\n\r\n\r\n    const handleEnablePush = async () => {\r\n        setPushLoading(true);\r\n        setPushMessage('');\r\n        try {\r\n            if (!('Notification' in window)) {\r\n                setPushMessage('âŒ ì´ ë¸Œë¼ìš°ì €ëŠ” ì•Œë¦¼ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ' + \r\n                    (deviceOS === 'ios' ? \"ì•„ì´í°ì€ 'í™ˆ í™”ë©´ì— ì¶”ê°€'ë¥¼ í†µí•´ ì•±ì„ ì„¤ì¹˜í•´ì•¼ ì•Œë¦¼ ì„¤ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\" : \"í¬ë¡¬ ë“± ìµœì‹  ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•´ ì£¼ì„¸ìš”.\"));\r\n                return;\r\n            }\r\n\r\n            const permission = await window.Notification.requestPermission();\r\n            if (permission === 'granted') {\r\n                const token = await getToken(messaging, {\r\n                    vapidKey: import.meta.env.VITE_FIREBASE_VAPID_KEY\r\n                });\r\n                if (token) {\r\n                    await storageService.saveInstructorToken(token, instructorName);\r\n                    setPushEnabled(true);\r\n                    setPushMessage('âœ… ì•Œë¦¼ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');\r\n                } else {\r\n                    setPushMessage('âŒ í† í°ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');\r\n                }\r\n            } else if (permission === 'denied') {\r\n                setPushMessage('âŒ ì•Œë¦¼ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ í—ˆìš©í•´ì£¼ì„¸ìš”.');\r\n            }\r\n        } catch (e) {\r\n            console.error('Push setup failed:', e);\r\n            setPushMessage('âŒ ì•Œë¦¼ ì„¤ì • ì‹¤íŒ¨: ' + e.message);\r\n        } finally {\r\n            setPushLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDisablePush = () => {\r\n        setPushMessage('â„¹ï¸ ë¸Œë¼ìš°ì € ì„¤ì •ì—ì„œ ì•Œë¦¼ì„ ëŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\\nì‚¬ì´íŠ¸ ì„¤ì • > ì•Œë¦¼ > ì°¨ë‹¨');\r\n    };\r\n\r\n    const handleInstallPWA = async () => {\r\n        if (deferredPrompt) {\r\n            deferredPrompt.prompt();\r\n            const { outcome } = await deferredPrompt.userChoice;\r\n            if (outcome === 'accepted') setIsStandalone(true);\r\n            setDeferredPrompt(null);\r\n        } else {\r\n            // Manual Guide\r\n            if (deviceOS === 'ios') {\r\n                setPushMessage('â„¹ï¸ ì•„ì´í° ì„¤ì¹˜ ë°©ë²•: Safari í•˜ë‹¨ ê³µìœ  ë²„íŠ¼(â†‘) í´ë¦­ > \"í™ˆ í™”ë©´ì— ì¶”ê°€\"ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.');\r\n            } else if (deviceOS === 'android') {\r\n                setPushMessage('â„¹ï¸ ì•ˆë“œë¡œì´ë“œ ì„¤ì¹˜ ë°©ë²•: ë¸Œë¼ìš°ì € ìš°ì¸¡ ìƒë‹¨ ë©”ë‰´(â‹®) í´ë¦­ > \"í™ˆ í™”ë©´ì— ì¶”ê°€\" í˜¹ì€ \"ì•± ì„¤ì¹˜\"ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.');\r\n            } else {\r\n                setPushMessage('â„¹ï¸ ë¸Œë¼ìš°ì € ë©”ë‰´ì—ì„œ \"í™ˆ í™”ë©´ì— ì¶”ê°€\"ë¥¼ ì„ íƒí•˜ì—¬ ì•±ì„ ì„¤ì¹˜í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');\r\n            }\r\n        }\r\n    };\r\n\r\n    // Split attendance by branch\r\n    const ghcAttendance = attendance.filter(r => r.branchName === 'ê´‘í¥ì°½ì ' || r.branchId === 'gwangheungchang');\r\n    const mapoAttendance = attendance.filter(r => r.branchName === 'ë§ˆí¬ì ' || r.branchId === 'mapo');\r\n\r\n    const renderAttendanceList = (list, title, color, branchId) => {\r\n        const branchClasses = instructorClasses.filter(c => c.branchId === branchId);\r\n        \r\n        // Hide only if both attendance AND classes are empty\r\n        if (list.length === 0 && branchClasses.length === 0) return null;\r\n        \r\n        const currentMinutes = getKSTTotalMinutes();\r\n\r\n        const getStatus = (timeStr, duration = 60) => {\r\n            const [h, m] = timeStr.split(':').map(Number);\r\n            const start = h * 60 + m;\r\n            const end = start + duration;\r\n            if (currentMinutes < start) return { label: 'ì˜ˆì •', color: '#FFD93D' };\r\n            if (currentMinutes >= start && currentMinutes < end) return { label: 'ì§„í–‰ ì¤‘', color: '#4CAF50' };\r\n            return { label: 'ì¢…ë£Œ', color: 'gray' };\r\n        };\r\n\r\n        return (\r\n            <div style={{ marginTop: '16px', background: 'rgba(255,255,255,0.02)', padding: '16px', borderRadius: '12px', border: '1px solid rgba(255,255,255,0.05)' }}>\r\n                <h4 style={{ margin: '0 0 12px', fontSize: '0.95rem', color: color, display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\r\n                        <div style={{ width: '8px', height: '8px', borderRadius: '50%', background: color }} />\r\n                        {title}\r\n                    </div>\r\n                    <span style={{ opacity: 0.6, fontSize: '0.8rem', fontWeight: 'normal' }}>ì´ {list.length}ëª… ì¶œì„</span>\r\n                </h4>\r\n\r\n                {/* ì˜¤ëŠ˜ ìˆ˜ì—… ëª©ë¡ */}\r\n                <div style={{ marginBottom: '16px', display: 'flex', flexWrap: 'wrap', gap: '8px' }}>\r\n                    {branchClasses.map((cls, idx) => {\r\n                        const status = getStatus(cls.time, cls.duration);\r\n                        return (\r\n                            <div key={idx} style={{ \r\n                                background: 'rgba(255,255,255,0.05)', padding: '6px 10px', borderRadius: '6px',\r\n                                fontSize: '0.75rem', border: `1px solid ${status.color}44`, display: 'flex', alignItems: 'center', gap: '6px'\r\n                            }}>\r\n                                <span style={{ color: status.color, fontWeight: 'bold' }}>â€¢ {status.label}</span>\r\n                                <span style={{ color: 'white' }}>{cls.time} {cls.title}</span>\r\n                            </div>\r\n                        );\r\n                    })}\r\n                </div>\r\n\r\n                {/* ì¶œì„ ëª…ë‹¨ */}\r\n                {list.length > 0 ? (\r\n                    <div style={{ display: 'flex', flexDirection: 'column', gap: '8px' }}>\r\n                        {list.map((record, idx) => (\r\n                            <div key={record.id || idx} style={{ \r\n                                display: 'flex', justifyContent: 'space-between', alignItems: 'center',\r\n                                padding: '8px 12px', background: 'rgba(255,255,255,0.03)', borderRadius: '6px',\r\n                                borderLeft: `2px solid ${color}`\r\n                            }}>\r\n                                <div>\r\n                                    <div style={{ fontWeight: 'bold', fontSize: '0.9rem', display: 'flex', alignItems: 'center', gap: '6px' }}>\r\n                                        {record.memberName}\r\n                                        {(() => {\r\n                                            // ì‹ ê·œ ë°°ì§€: startDateê°€ ìµœê·¼ 14ì¼ ì´ë‚´ì¸ ê²½ìš°\r\n                                            const isNew = record.startDate && (() => {\r\n                                                const start = new Date(record.startDate);\r\n                                                const now = new Date();\r\n                                                const diff = (now - start) / (1000 * 60 * 60 * 24);\r\n                                                return diff <= 14;\r\n                                            })();\r\n                                            if (isNew) return (\r\n                                                <span style={{ fontSize: '0.65rem', background: '#ff4757', color: 'white', padding: '1px 6px', borderRadius: '4px', fontWeight: 'bold' }}>ì‹ ê·œ</span>\r\n                                            );\r\n                                            return null;\r\n                                        })()}\r\n                                    </div>\r\n                                    <div style={{ fontSize: '0.75rem', color: 'var(--text-secondary)', display: 'flex', gap: '8px', marginTop: '2px' }}>\r\n                                        <span>{record.className}</span>\r\n                                        {(record.credits !== undefined || record.endDate) && (\r\n                                            <span style={{ color: 'var(--primary-gold)', opacity: 0.9 }}>\r\n                                                {record.credits !== undefined && `${record.credits}íšŒ `}\r\n                                                {record.endDate && `/ ~${record.endDate.slice(2)}`}\r\n                                            </span>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <div style={{ color: 'var(--primary-gold)', fontWeight: 'bold', fontSize: '0.85rem' }}>\r\n                                    {record.timestamp ? new Date(record.timestamp).toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit', hour12: false }) : ''}\r\n                                </div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : (\r\n                    <div style={{ fontSize: '0.8rem', color: 'rgba(255,255,255,0.3)', padding: '8px', textAlign: 'center', border: '1px dashed rgba(255,255,255,0.1)', borderRadius: '6px' }}>\r\n                        ì¶œì„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div style={{ padding: '16px' }}>\r\n\r\n            {/* Attendance */}\r\n            <div style={{ background: 'var(--bg-surface)', padding: '20px', borderRadius: '12px', marginBottom: '16px' }}>\r\n                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '10px' }}>\r\n                    <h3 style={{ margin: 0, fontSize: '1rem' }}>ğŸ“‹ ë‚˜ì˜ ì˜¤ëŠ˜ ì¶œì„í˜„í™©</h3>\r\n                    <span style={{ fontSize: '0.8rem', color: 'var(--text-secondary)' }}>{todayStr} ({attendance.length}ëª…)</span>\r\n                </div>\r\n                \r\n                {attendanceLoading ? (\r\n                    <div style={{ textAlign: 'center', color: 'var(--text-secondary)', padding: '20px' }}>ë¡œë”© ì¤‘...</div>\r\n                ) : (\r\n                    <>\r\n                        {ghcAttendance.length === 0 && mapoAttendance.length === 0 && instructorClasses.length === 0 ? (\r\n                            <div style={{ \r\n                                textAlign: 'center', \r\n                                padding: '40px 20px', \r\n                                color: 'var(--text-secondary)',\r\n                                background: 'rgba(255,255,255,0.02)',\r\n                                borderRadius: '12px',\r\n                                marginTop: '10px',\r\n                                border: '1px dashed rgba(255,255,255,0.1)'\r\n                            }}>\r\n                                <div style={{ fontSize: '2rem', marginBottom: '12px' }}>â˜•</div>\r\n                                <div style={{ fontSize: '0.95rem', fontWeight: 'bold', color: 'white', marginBottom: '4px' }}>ì˜¤ëŠ˜ì€ ìˆ˜ì—… ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤</div>\r\n                                <div style={{ fontSize: '0.85rem', opacity: 0.7 }}>í¸ì•ˆí•œ íœ´ì‹ê³¼ ì¶©ì „ì˜ ì‹œê°„ ë˜ì‹œê¸¸ ë°”ëë‹ˆë‹¤!</div>\r\n                            </div>\r\n                        ) : (\r\n                            <>\r\n                                {renderAttendanceList(ghcAttendance, 'ê´‘í¥ì°½ì ', 'var(--primary-gold)', 'gwangheungchang')}\r\n                                {renderAttendanceList(mapoAttendance, 'ë§ˆí¬ì ', '#3B82F6', 'mapo')}\r\n                            </>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>\r\n\r\n            {/* Push Notification */}\r\n            <div style={{ background: 'var(--bg-surface)', padding: '20px', borderRadius: '12px', marginBottom: '16px' }}>\r\n                <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '12px' }}>\r\n                    {pushEnabled ? <BellRinging size={24} color=\"var(--primary-gold)\" weight=\"fill\" /> : <Bell size={24} color=\"var(--text-secondary)\" />}\r\n                    <div>\r\n                        <h3 style={{ margin: 0, fontSize: '1rem' }}>ë‚˜ì˜ ìˆ˜ì—… ì¶œì„íšŒì› ì•Œë¦¼</h3>\r\n                        <div style={{ margin: '2px 0 0', fontSize: '0.8rem', color: 'var(--text-secondary)' }}>\r\n                            íšŒì› ì¶œì„ ì‹œ ì•Œë¦¼ ë°›ê¸°\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                {pushEnabled ? (\r\n                    <button onClick={handleDisablePush} style={{ width: '100%', padding: '10px', borderRadius: '8px', border: 'none', background: 'rgba(76, 175, 80, 0.2)', color: '#4CAF50', fontWeight: 'bold', fontSize: '0.9rem', cursor: 'pointer', display: 'flex', alignItems: 'center', justifyContent: 'center', gap: '8px' }}>\r\n                        <BellRinging size={18} weight=\"fill\" /> ì•Œë¦¼ ON\r\n                    </button>\r\n                ) : (\r\n                    <button onClick={handleEnablePush} disabled={pushLoading} style={{ width: '100%', padding: '12px', borderRadius: '8px', border: 'none', background: pushLoading ? 'var(--bg-input)' : 'var(--primary-gold)', color: pushLoading ? 'var(--text-secondary)' : 'black', fontWeight: 'bold', fontSize: '0.9rem', cursor: 'pointer' }}>\r\n                        {pushLoading ? 'ì„¤ì • ì¤‘...' : 'ğŸ”” ì•Œë¦¼ í—ˆìš©í•˜ê¸°'}\r\n                    </button>\r\n                )}\r\n                \r\n                {pushMessage && (\r\n                    <div style={{ marginTop: '8px', fontSize: '0.85rem', textAlign: 'center', color: pushMessage.includes('âœ…') ? '#4CAF50' : 'var(--text-secondary)', whiteSpace: 'pre-line' }}>{pushMessage}</div>\r\n                )}\r\n            </div>\r\n\r\n            {/* PWA Install Guide */}\r\n            {!isStandalone && (\r\n                <div style={{ \r\n                    background: 'var(--bg-surface)', \r\n                    padding: '20px', \r\n                    borderRadius: '12px', \r\n                    marginBottom: '16px', \r\n                    border: deviceOS === 'ios' ? '1px solid rgba(59, 130, 246, 0.3)' : '1px solid rgba(212, 175, 55, 0.3)', \r\n                    boxShadow: deviceOS === 'ios' ? '0 0 15px rgba(59, 130, 246, 0.1)' : '0 0 15px rgba(212, 175, 55, 0.1)' \r\n                }}>\r\n                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '12px' }}>\r\n                        <div style={{ \r\n                            background: deviceOS === 'ios' ? '#3B82F6' : 'var(--primary-gold)', \r\n                            borderRadius: '10px', \r\n                            padding: '8px', \r\n                            display: 'flex' \r\n                        }}>\r\n                            {deviceOS === 'ios' ? (\r\n                                <Share size={24} color=\"white\" weight=\"bold\" />\r\n                            ) : (\r\n                                <SignOut size={24} color=\"black\" style={{ transform: 'rotate(-90deg)' }} />\r\n                            )}\r\n                        </div>\r\n                        <div>\r\n                            <h3 style={{ margin: 0, fontSize: '1rem', color: 'white' }}>\r\n                                {deviceOS === 'ios' ? 'ì•„ì´í°ì— ì•± ì„¤ì¹˜í•˜ê¸°' : 'í™ˆ í™”ë©´ì— ì•± ì„¤ì¹˜í•˜ê¸°'}\r\n                            </h3>\r\n                            <div style={{ margin: '2px 0 0', fontSize: '0.8rem', color: 'var(--text-secondary)' }}>\r\n                                {deviceOS === 'ios' ? 'ì‚¬íŒŒë¦¬(Safari)ì—ì„œ í™ˆ í™”ë©´ì— ì¶”ê°€í•˜ì„¸ìš”' : 'ì•±ì²˜ëŸ¼ í¸í•˜ê²Œ ì•„ì´ì½˜ìœ¼ë¡œ ì ‘ì†í•˜ì„¸ìš”'}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                    {deviceOS === 'ios' ? (\r\n                        <div style={{ background: 'rgba(59, 130, 246, 0.1)', padding: '12px', borderRadius: '8px', marginTop: '10px' }}>\r\n                             <div style={{ display: 'flex', alignItems: 'center', gap: '8px', marginBottom: '8px', fontSize: '0.9rem' }}>\r\n                                <span style={{ background: '#3B82F6', color: 'white', width: '20px', height: '20px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.75rem', fontWeight: 'bold' }}>1</span>\r\n                                <span style={{ color: '#e0e0e0' }}>í•˜ë‹¨ <Share size={16} weight=\"bold\" style={{ verticalAlign: 'middle', margin: '0 2px' }} /> <strong>ê³µìœ  ë²„íŠ¼</strong> í´ë¦­</span>\r\n                             </div>\r\n                             <div style={{ display: 'flex', alignItems: 'center', gap: '8px', fontSize: '0.9rem' }}>\r\n                                <span style={{ background: '#3B82F6', color: 'white', width: '20px', height: '20px', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '0.75rem', fontWeight: 'bold' }}>2</span>\r\n                                <span style={{ color: '#e0e0e0' }}><PlusSquare size={16} weight=\"bold\" style={{ verticalAlign: 'middle', margin: '0 2px' }} /> <strong>í™ˆ í™”ë©´ì— ì¶”ê°€</strong> ì„ íƒ</span>\r\n                             </div>\r\n                        </div>\r\n                    ) : (\r\n                        <button \r\n                            onClick={handleInstallPWA} \r\n                            style={{ \r\n                                width: '100%', padding: '14px', borderRadius: '10px', border: 'none', \r\n                                background: 'var(--primary-gold)', color: 'black', fontWeight: 'bold', \r\n                                fontSize: '1rem', cursor: 'pointer', display: 'flex', alignItems: 'center', \r\n                                justifyContent: 'center', gap: '8px', boxShadow: '0 4px 10px rgba(0,0,0,0.3)'\r\n                            }}\r\n                        >\r\n                            <SignOut size={20} style={{ transform: 'rotate(-90deg)' }} /> í°ì— ì•± ì„¤ì¹˜í•˜ê¸°\r\n                        </button>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            <div style={{ textAlign: 'center', fontSize: '0.75rem', opacity: 0.6, color: 'var(--text-secondary)', padding: '20px 8px' }}>\r\n                <div style={{ marginBottom: '4px', fontSize: '0.85rem' }}>{instructorName} ì„ ìƒë‹˜ìœ¼ë¡œ ë¡œê·¸ì¸ë¨</div>\r\n                <div style={{ fontSize: '0.75rem', display: 'flex', flexDirection: 'column', gap: '2px' }}>\r\n                     <span>v2026.02.19.2 | Date: {todayStr}</span>\r\n                     <span>User: [{instructorName}] ({instructorName.trim().length})</span>\r\n                     <span>Classes: {instructorClasses.length} / Att: {attendance.length}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default InstructorHome;\r\n","import { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { CalendarBlank, Bell, House, SignOut } from '@phosphor-icons/react';\r\nimport { storageService } from '../services/storage';\r\nimport { getKSTHour } from '../utils/dates';\r\nimport CosmicParticles from '../components/common/CosmicParticles';\r\n\r\nimport InstructorLogin from '../components/instructor/InstructorLogin';\r\nimport InstructorSchedule from '../components/instructor/InstructorSchedule';\r\nimport InstructorNotices from '../components/instructor/InstructorNotices';\r\nimport InstructorHome from '../components/instructor/InstructorHome';\r\nimport InstallGuideModal from '../components/InstallGuideModal';\r\n\r\n// === Helper for Default Greeting ===\r\nconst getDefaultGreeting = (name, h, day) => {\r\n    const timeGreeting = h < 12 ? 'ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”' : h < 17 ? 'ì˜¤ëŠ˜ë„ ì¢‹ì€ ì˜¤í›„ì˜ˆìš”' : 'ìˆ˜ê³ í•˜ì…¨ì–´ìš”';\r\n    const dayContext = day === 'ì›”' ? 'ìƒˆë¡œìš´ í•œ ì£¼ì˜ ì‹œì‘!' : \r\n                      day === 'ê¸ˆ' ? 'ì¦ê±°ìš´ ê¸ˆìš”ì¼!' : \r\n                      (day === 'í† ' || day === 'ì¼') ? 'í–‰ë³µí•œ ì£¼ë§!' : '';\r\n    return `${name} ì„ ìƒë‹˜, ${timeGreeting} ğŸ§˜â€â™€ï¸ ${dayContext}`;\r\n};\r\n\r\n// === Main Page ===\r\nconst InstructorPage = () => {\r\n    const [instructorName, setInstructorName] = useState(localStorage.getItem('instructorName') || '');\r\n    const [instructors, setInstructors] = useState([]);\r\n    const [activeTab, setActiveTab] = useState('home');\r\n    const [loading, setLoading] = useState(true);\r\n    \r\n    // Subscription Cleanup Ref\r\n    const unsubscribesRef = useRef([]);\r\n    const lastAiFetchArgs = useRef(''); // [FIX] AI ì¤‘ë³µ í˜¸ì¶œ ë°©ì§€ìš© ìƒíƒœ ì¶”ì \r\n\r\n    // AI Greeting State (Global)\r\n    const [aiGreeting, setAiGreeting] = useState('');\r\n    const [aiGreetingLoading, setAiGreetingLoading] = useState(false); // [AI] ë¡œë”© ì• ë‹ˆë©”ì´ì…˜\r\n    const [aiEnhancedGreeting, setAiEnhancedGreeting] = useState(null); // [AI] AI ë³´ê°• ë©”ì‹œì§€\r\n    const [showInstallGuide, setShowInstallGuide] = useState(false); // [PWA] Install Guide\r\n    \r\n    // Attendance State (Global)\r\n    const [attendance, setAttendance] = useState([]);\r\n    const [instructorClasses, setInstructorClasses] = useState([]);\r\n    const [attendanceLoading, setAttendanceLoading] = useState(true);\r\n    const todayStr = useMemo(() => new Date().toLocaleDateString('sv-SE', { timeZone: 'Asia/Seoul' }), []);\r\n    const hour = getKSTHour();\r\n\r\n    const branches = useMemo(() => [\r\n        { id: 'gwangheungchang', name: 'ê´‘í¥ì°½ì ' },\r\n        { id: 'mapo', name: 'ë§ˆí¬ì ' }\r\n    ], []);\r\n\r\n    // Load Instructors\r\n    useEffect(() => {\r\n        const loadInstructors = async () => {\r\n            try {\r\n                const insts = await storageService.getInstructors();\r\n                if (insts && insts.length > 0) {\r\n                    setInstructors(insts);\r\n                }\r\n            } catch (e) {\r\n                console.error('Failed to load instructors:', e);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        loadInstructors();\r\n    }, []);\r\n\r\n    // [PWA] Auto-show install guide for non-standalone users\r\n    useEffect(() => {\r\n        const isStandalone = window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone === true;\r\n        const hasSeenGuide = localStorage.getItem('has_seen_inst_install_guide');\r\n        \r\n        // Show after a slight delay\r\n        if (!isStandalone && !hasSeenGuide) {\r\n            const timer = setTimeout(() => {\r\n                setShowInstallGuide(true);\r\n                localStorage.setItem('has_seen_inst_install_guide', 'true');\r\n            }, 3000);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, []);\r\n\r\n    // [PUSH] Request notification permission and register token for instructor\r\n    useEffect(() => {\r\n        if (!instructorName) return;\r\n        \r\n        const registerPush = async () => {\r\n            // Wait a bit to not overwhelm the user immediately\r\n            setTimeout(async () => {\r\n                try {\r\n                    console.log(`[InstructorPage] Attempting push registration for: ${instructorName}`);\r\n                    await storageService.requestInstructorPushPermission(instructorName);\r\n                } catch (e) {\r\n                    console.error('[InstructorPage] Push registration failed:', e);\r\n                }\r\n            }, 5000);\r\n        };\r\n        \r\n        registerPush();\r\n    }, [instructorName]);\r\n\r\n    // Load Attendance & Schedule in Real-time\r\n    useEffect(() => {\r\n        if (!instructorName) return;\r\n\r\n        // 1. Initial Load for Classes & Attendance (Baseline)\r\n        const loadInitialData = async () => {\r\n            try {\r\n                // Fetch Classes (Static for the day)\r\n                const classPromises = branches.map(b => storageService.getDailyClasses(b.id, instructorName));\r\n                \r\n                // Fetch Attendance (Baseline)\r\n                const attendancePromises = branches.map(b => storageService.getAttendanceByDate(todayStr, b.id));\r\n\r\n                const [classResults, attendanceResults] = await Promise.all([\r\n                    Promise.all(classPromises),\r\n                    Promise.all(attendancePromises)\r\n                ]);\r\n                \r\n                // Process Classes\r\n                let allMyClasses = [];\r\n                classResults.forEach((data, idx) => {\r\n                    const branchName = branches[idx].name;\r\n                    const branchId = branches[idx].id;\r\n                    const branchClasses = (data || []).map(c => ({ ...c, branchName, branchId }));\r\n                    allMyClasses = [...allMyClasses, ...branchClasses];\r\n                });\r\n                setInstructorClasses(allMyClasses);\r\n\r\n                // Process Attendance Baseline\r\n                let allBaselineAttendance = [];\r\n                attendanceResults.forEach((data, idx) => {\r\n                    const branchName = branches[idx].name;\r\n                    const branchId = branches[idx].id;\r\n                    \r\n                    const myBranchClasses = allMyClasses.filter(c => c.branchId === branchId);\r\n                    const myClassTitles = new Set(myBranchClasses.map(c => c.title));\r\n\r\n                    console.log(`[InstructorPage] Branch: ${branchId}, Fetched: ${data?.length} logs`);\r\n                    \r\n                    const branchRecords = (data || [])\r\n                        .filter(r => {\r\n                            // Relaxed Filtering Logic\r\n                            const recordInstructor = r.instructor ? r.instructor.trim() : '';\r\n                            const currentInstructor = instructorName.trim();\r\n                            \r\n                            const isExactMatch = recordInstructor === currentInstructor;\r\n                            const isUndesignated = recordInstructor === 'ë¯¸ì§€ì •' || !recordInstructor;\r\n                            const isClassMatch = myClassTitles.has(r.className);\r\n\r\n                            // Debug logging for unmatched but potential candidates\r\n                            if (isUndesignated && isClassMatch) {\r\n                                console.log('[InstructorPage] Included Undesignated:', r);\r\n                            }\r\n\r\n                            return isExactMatch || (isUndesignated && isClassMatch);\r\n                        })\r\n                        .map(r => ({ ...r, branchName, branchId }));\r\n                    allBaselineAttendance = [...allBaselineAttendance, ...branchRecords];\r\n                });\r\n                \r\n                allBaselineAttendance.forEach(a => a._ts = new Date(a.timestamp).getTime());\r\n                setAttendance(allBaselineAttendance.sort((a, b) => b._ts - a._ts));\r\n                setAttendanceLoading(false); // Initial load done\r\n\r\n                // 2. Real-time Subscription (Moved inside to access allMyClasses)\r\n                const newUnsubscribes = branches.map(branch => {\r\n                    return storageService.subscribeAttendance(todayStr, branch.id, (records) => {\r\n                        setAttendance(prev => {\r\n                            const otherBranches = prev.filter(r => r.branchId !== branch.id);\r\n                            const branchName = branch.name;\r\n                            const branchId = branch.id;\r\n                            \r\n                            // Re-filter with the known classes\r\n                            const myBranchClasses = allMyClasses.filter(c => c.branchId === branchId);\r\n                            const myClassTitles = new Set(myBranchClasses.map(c => c.title));\r\n\r\n                            const branchRecords = (records || [])\r\n                                .filter(r => {\r\n                                    const recordInstructor = r.instructor ? r.instructor.trim() : '';\r\n                                    const currentInstructor = instructorName.trim();\r\n                                    \r\n                                    const isExactMatch = recordInstructor === currentInstructor;\r\n                                    const isUndesignated = recordInstructor === 'ë¯¸ì§€ì •' || !recordInstructor;\r\n                                    const isClassMatch = myClassTitles.has(r.className);\r\n                                    \r\n                                    return isExactMatch || (isUndesignated && isClassMatch);\r\n                                })\r\n                                .map(r => ({ ...r, branchName, branchId }));\r\n                            \r\n                            const merged = [...otherBranches, ...branchRecords];\r\n                            merged.sort((a, b) => {\r\n                                const ta = a._ts || (a._ts = new Date(a.timestamp).getTime());\r\n                                const tb = b._ts || (b._ts = new Date(b.timestamp).getTime());\r\n                                return tb - ta;\r\n                            });\r\n                            return merged;\r\n                        });\r\n                    });\r\n                });\r\n                unsubscribesRef.current = newUnsubscribes;\r\n\r\n            } catch (e) {\r\n                console.error('Failed to load initial data:', e);\r\n                setAttendanceLoading(false);\r\n            }\r\n        };\r\n\r\n        loadInitialData();\r\n\r\n        // Cleanup function\r\n        return () => {\r\n             if (unsubscribesRef.current) {\r\n                unsubscribesRef.current.forEach(unsub => unsub());\r\n             }\r\n        };\r\n    }, [instructorName, todayStr, branches]);\r\n\r\n    // Initialize AI Greeting (Instant + Fetch)\r\n    useEffect(() => {\r\n        if (!instructorName) return;\r\n\r\n        const dayOfWeek = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '][new Date().getDay()];\r\n        \r\n        // 1. Try Cache First for instant display\r\n        const cacheKey = `ai_greeting_${instructorName}_${todayStr}_${hour}`;\r\n        const cached = localStorage.getItem(cacheKey);\r\n        \r\n        if (cached) {\r\n            setAiGreeting(cached);\r\n        } else {\r\n            // If no cache, set default instant message (to avoid \"Loading...\")\r\n            setAiGreeting(getDefaultGreeting(instructorName, hour, dayOfWeek));\r\n        }\r\n\r\n        // 2. Fetch fresh AI message in background\r\n        const currentArgs = `${instructorName}_${attendance.length}_${hour}`;\r\n        const fetchAI = async () => {\r\n            if (attendanceLoading || lastAiFetchArgs.current === currentArgs) return;\r\n            \r\n            lastAiFetchArgs.current = currentArgs;\r\n            setAiGreetingLoading(true); // [AI] ë¡œë”© ì‹œì‘\r\n            try {\r\n                const result = await storageService.getAIExperience(\r\n                    instructorName,\r\n                    attendance.length,\r\n                    dayOfWeek,\r\n                    hour,\r\n                    null, null, null, null, 'ko', null, 'instructor'\r\n                );\r\n                \r\n                const greetingText = typeof result === 'string' \r\n                    ? result \r\n                    : (result?.message || getDefaultGreeting(instructorName, hour, dayOfWeek, attendance.length));\r\n                \r\n                // [AI] AI ë©”ì‹œì§€ê°€ ê¸°ì¡´ê³¼ ë‹¤ë¥´ë©´ ë³´ê°• ë©”ì‹œì§€ë¡œ ì¶”ê°€ í‘œì‹œ\r\n                if (greetingText && greetingText !== aiGreeting && !result?.isFallback) {\r\n                    setAiEnhancedGreeting(greetingText);\r\n                } else {\r\n                    setAiGreeting(greetingText);\r\n                }\r\n                localStorage.setItem(cacheKey, greetingText);\r\n            } catch (e) {\r\n                console.error('AI greeting background fetch failed:', e);\r\n            } finally {\r\n                setAiGreetingLoading(false); // [AI] ë¡œë”© ì¢…ë£Œ\r\n            }\r\n        };\r\n\r\n        if (!attendanceLoading && !cached && lastAiFetchArgs.current !== currentArgs) {\r\n            fetchAI();\r\n        }\r\n\r\n    }, [instructorName, attendance.length, attendanceLoading, hour, todayStr]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('instructorName');\r\n        setInstructorName('');\r\n        setAiGreeting('');\r\n        setAttendance([]);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div style={{ minHeight: '100dvh', background: 'var(--bg-primary)', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                <div style={{ textAlign: 'center', color: 'var(--primary-gold)' }}>ë¡œë”© ì¤‘...</div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!instructorName) {\r\n        return (\r\n            <>\r\n                <CosmicParticles />\r\n                <InstructorLogin onLogin={setInstructorName} instructors={instructors} />\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div style={{ minHeight: '100vh', background: 'transparent', paddingBottom: '80px', position: 'relative' }}>\r\n            <CosmicParticles />\r\n            \r\n            {/* Header */}\r\n            <div style={{ background: 'rgba(20, 20, 25, 0.95)', padding: '16px 20px', display: 'flex', justifyContent: 'space-between', alignItems: 'center', borderBottom: '1px solid var(--border-color)', position: 'relative', zIndex: 2 }}>\r\n                <div>\r\n                    <h1 style={{ margin: 0, fontSize: '1.2rem', color: 'var(--primary-gold)' }}>ë³µìƒ˜ìš”ê°€ ì„ ìƒë‹˜</h1>\r\n                    <div style={{ margin: '4px 0 0', fontSize: '0.9rem', color: 'var(--text-secondary)' }}>{instructorName} ì„ ìƒë‹˜</div>\r\n                </div>\r\n                <button onClick={handleLogout} style={{ background: 'none', border: 'none', cursor: 'pointer' }}>\r\n                    <SignOut size={24} color=\"var(--text-secondary)\" />\r\n                </button>\r\n            </div>\r\n\r\n            {/* AI Greeting (Top of Content) */}\r\n            <div style={{ \r\n                position: 'relative', zIndex: 1,\r\n                background: 'linear-gradient(135deg, rgba(212, 175, 55, 0.15) 0%, rgba(212, 175, 55, 0.05) 100%)', \r\n                padding: '16px 20px', \r\n                borderBottom: '1px solid rgba(212, 175, 55, 0.1)'\r\n            }}>\r\n                <div style={{ margin: 0, fontSize: '1rem', lineHeight: 1.5, color: 'var(--text-primary)', textAlign: 'center', fontStyle: 'italic' }}>\r\n                    &quot;{aiGreeting}&quot;\r\n                </div>\r\n                {/* [AI] ë³´ê°• ë©”ì‹œì§€ - ê¸°ì¡´ ì¸ì‚¬ë§ ì•„ë˜ ì¶”ê°€ */}\r\n                {aiEnhancedGreeting && (\r\n                    <div style={{\r\n                        marginTop: '10px',\r\n                        padding: '10px 14px',\r\n                        background: 'rgba(212,175,55,0.08)',\r\n                        border: '1px solid rgba(212,175,55,0.2)',\r\n                        borderRadius: '12px',\r\n                        animation: 'slideUp 0.6s ease-out',\r\n                        display: 'flex',\r\n                        alignItems: 'flex-start',\r\n                        gap: '8px'\r\n                    }}>\r\n                        <span style={{ fontSize: '1rem', flexShrink: 0 }}>âœ¨</span>\r\n                        <span style={{\r\n                            fontSize: '0.9rem',\r\n                            color: 'rgba(255,255,255,0.85)',\r\n                            lineHeight: 1.5,\r\n                            fontWeight: 400,\r\n                            fontStyle: 'italic',\r\n                            wordBreak: 'keep-all'\r\n                        }}>\r\n                            {aiEnhancedGreeting}\r\n                        </span>\r\n                    </div>\r\n                )}\r\n                {/* [AI] ë¡œë”© ì¸ë””ì¼€ì´í„° */}\r\n                {aiGreetingLoading && (\r\n                    <div style={{\r\n                        marginTop: '8px',\r\n                        display: 'flex',\r\n                        alignItems: 'center',\r\n                        justifyContent: 'center',\r\n                        gap: '8px',\r\n                        animation: 'fadeIn 0.3s ease-out'\r\n                    }}>\r\n                        <div className=\"ai-thinking-icon\" style={{ width: '16px', height: '16px', display: 'flex', alignItems: 'center', justifyContent: 'center' }}>\r\n                            <svg width=\"14\" height=\"14\" viewBox=\"0 0 256 256\" fill=\"var(--primary-gold)\">\r\n                                <path d=\"M200,48H136V16a8,8,0,0,0-16,0V48H56A32,32,0,0,0,24,80v96a32,32,0,0,0,32,32h80v32a8,8,0,0,0,16,0V208h48a32,32,0,0,0,32-32V80A32,32,0,0,0,200,48ZM172,168H84a12,12,0,0,1,0-24h88a12,12,0,0,1,0,24Zm0-48H84a12,12,0,0,1,0-24h88a12,12,0,0,1,0,24Z\"/>\r\n                            </svg>\r\n                        </div>\r\n                        <span style={{\r\n                            color: 'rgba(212,175,55,0.7)',\r\n                            fontSize: '0.8rem',\r\n                            fontWeight: 400,\r\n                            animation: 'pulse 1.5s ease-in-out infinite'\r\n                        }}>\r\n                            AIê°€ ì˜¤ëŠ˜ì˜ ì¸ì‚¬ë¥¼ ì¤€ë¹„í•˜ê³  ìˆì–´ìš”\r\n                        </span>\r\n                        <div style={{ display: 'flex', gap: '3px' }}>\r\n                            {[0, 1, 2].map(i => (\r\n                                <div key={i} style={{\r\n                                    width: '4px', height: '4px',\r\n                                    borderRadius: '50%',\r\n                                    background: 'var(--primary-gold)',\r\n                                    opacity: 0.6,\r\n                                    animation: `pulse 1.4s ease-in-out ${i * 0.2}s infinite`\r\n                                }} />\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div style={{ position: 'relative', zIndex: 1, minHeight: 'calc(100vh - 220px)' }}>\r\n                {activeTab === 'home' && <InstructorHome instructorName={instructorName} attendance={attendance} attendanceLoading={attendanceLoading} instructorClasses={instructorClasses} />}\r\n                {activeTab === 'schedule' && <InstructorSchedule instructorName={instructorName} />}\r\n                {activeTab === 'notices' && <InstructorNotices />}\r\n            </div>\r\n\r\n            {/* Bottom Navigation */}\r\n            <div style={{\r\n                position: 'fixed', bottom: 0, left: 0, right: 0, background: 'var(--bg-surface)',\r\n                display: 'flex', justifyContent: 'space-around', padding: '8px 0', borderTop: '1px solid var(--border-color)',\r\n                zIndex: 10\r\n            }}>\r\n                <TabButton icon={<House size={24} />} label=\"í™ˆ\" active={activeTab === 'home'} onClick={() => setActiveTab('home')} />\r\n                <TabButton icon={<CalendarBlank size={24} />} label=\"ì‹œê°„í‘œ\" active={activeTab === 'schedule'} onClick={() => setActiveTab('schedule')} />\r\n                <TabButton icon={<Bell size={24} />} label=\"ê³µì§€\" active={activeTab === 'notices'} onClick={() => setActiveTab('notices')} />\r\n            </div>\r\n\r\n            <InstallGuideModal isOpen={showInstallGuide} onClose={() => setShowInstallGuide(false)} />\r\n        </div>\r\n    );\r\n};\r\n\r\nconst TabButton = ({ icon, label, active, onClick }) => (\r\n    <button\r\n        onClick={onClick}\r\n        style={{\r\n            background: 'none', \r\n            border: 'none', \r\n            display: 'flex', \r\n            flexDirection: 'column', \r\n            alignItems: 'center', \r\n            gap: '4px',\r\n            color: active ? 'var(--primary-gold)' : 'var(--text-secondary)', \r\n            cursor: 'pointer',\r\n            padding: '12px 20px',\r\n            minWidth: '64px',\r\n            touchAction: 'manipulation',\r\n            userSelect: 'none',\r\n            WebkitTapHighlightColor: 'transparent',\r\n            transition: 'transform 0.1s, opacity 0.1s'\r\n        }}\r\n    >\r\n        {icon}\r\n        <span style={{ fontSize: '0.75rem' }}>{label}</span>\r\n    </button>\r\n);\r\n\r\nconst navBtnStyle = {\r\n    background: 'var(--bg-input)', border: 'none', color: 'var(--text-primary)', width: '36px', height: '36px',\r\n    borderRadius: '50%', cursor: 'pointer', fontSize: '1rem'\r\n};\r\n\r\nexport default InstructorPage;\r\n"],"names":["e","a.createElement","a.Fragment","o","e.forwardRef","t","e.createElement","a","l","s","o.forwardRef","o.createElement","n","CosmicParticles","canvasRef","useRef","useEffect","canvas","ctx","animationId","particles","resize","count","i","animate","p","blue","startX","startY","gradient","jsx","InstructorLogin","onLogin","instructors","name","setName","useState","phoneLast4","setPhoneLast4","error","setError","loading","setLoading","handleLogin","result","storageService","jsxs","User","inst","instName","Phone","value","navBtnStyle","InstructorSchedule","instructorName","currentDate","setCurrentDate","monthlyData","setMonthlyData","selectedDate","setSelectedDate","dateAttendance","setDateAttendance","expandedClassKey","setExpandedClassKey","loadingAttendance","setLoadingAttendance","year","month","branches","useMemo","promises","b","getMonthlyClasses","results","merged","data","idx","branch","date","classes","classesWithBranch","cls","all","daysInMonth","firstDay","dayNames","getBranchStatus","dateStr","myClasses","renderCalendar","cells","d","hasGhc","hasMapo","isSelected","isToday","dayOfWeek","isRedDay","isHoliday","isBlueDay","holidayName","getHolidayName","borderStyle","borderColor","textColor","holidayMap","selectedClasses","day","isCancelled","key","att","aidx","SimpleImageModal","isOpen","onClose","imageSrc","createPortal","X","InstructorNotices","notices","setNotices","selectedImage","setSelectedImage","unsubscribe","notice","img","InstructorHome","attendance","attendanceLoading","instructorClasses","pushEnabled","setPushEnabled","pushLoading","setPushLoading","pushMessage","setPushMessage","deferredPrompt","setDeferredPrompt","isStandalone","setIsStandalone","deviceOS","setDeviceOS","todayStr","ua","isInstalled","handleBeforeInstall","handleEnablePush","permission","token","getToken","messaging","handleDisablePush","handleInstallPWA","outcome","ghcAttendance","r","mapoAttendance","renderAttendanceList","list","title","color","branchId","branchClasses","currentMinutes","getKSTTotalMinutes","getStatus","timeStr","duration","h","m","start","end","status","record","Fragment","BellRinging","Bell","Share","SignOut","PlusSquare","getDefaultGreeting","timeGreeting","InstructorPage","setInstructorName","setInstructors","activeTab","setActiveTab","unsubscribesRef","lastAiFetchArgs","aiGreeting","setAiGreeting","aiGreetingLoading","setAiGreetingLoading","aiEnhancedGreeting","setAiEnhancedGreeting","showInstallGuide","setShowInstallGuide","setAttendance","setInstructorClasses","setAttendanceLoading","hour","getKSTHour","insts","hasSeenGuide","timer","classPromises","attendancePromises","classResults","attendanceResults","allMyClasses","branchName","c","allBaselineAttendance","myBranchClasses","myClassTitles","branchRecords","recordInstructor","currentInstructor","isExactMatch","isUndesignated","isClassMatch","newUnsubscribes","records","prev","otherBranches","ta","unsub","cacheKey","cached","currentArgs","fetchAI","greetingText","handleLogout","TabButton","House","CalendarBlank","InstallGuideModal","icon","label","active","onClick"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}